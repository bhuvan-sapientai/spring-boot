


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > IntegrationAutoConfiguration</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.springframework.boot.autoconfigure.integration</a>
</div>

<h1>Coverage Summary for Class: IntegrationAutoConfiguration (org.springframework.boot.autoconfigure.integration)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">IntegrationAutoConfiguration</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/20)
  </span>
</td>
</tr>
  <tr>
    <td class="name">IntegrationAutoConfiguration$IntegrationComponentScanConfiguration</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">IntegrationAutoConfiguration$IntegrationConfiguration</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/25)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">IntegrationAutoConfiguration$IntegrationJdbcConfiguration</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">IntegrationAutoConfiguration$IntegrationJmxConfiguration</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/7)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">IntegrationAutoConfiguration$IntegrationManagementConfiguration</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">IntegrationAutoConfiguration$IntegrationManagementConfiguration$EnableIntegrationManagementConfiguration</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">IntegrationAutoConfiguration$IntegrationRSocketConfiguration</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">IntegrationAutoConfiguration$IntegrationRSocketConfiguration$AnyRSocketChannelAdapterAvailable</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">IntegrationAutoConfiguration$IntegrationRSocketConfiguration$AnyRSocketChannelAdapterAvailable$IntegrationRSocketEndpointAvailable</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">IntegrationAutoConfiguration$IntegrationRSocketConfiguration$AnyRSocketChannelAdapterAvailable$RSocketOutboundGatewayAvailable</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">IntegrationAutoConfiguration$IntegrationRSocketConfiguration$IntegrationRSocketClientConfiguration</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/7)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">IntegrationAutoConfiguration$IntegrationRSocketConfiguration$IntegrationRSocketClientConfiguration$RemoteRSocketServerAddressConfigured</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">IntegrationAutoConfiguration$IntegrationRSocketConfiguration$IntegrationRSocketClientConfiguration$RemoteRSocketServerAddressConfigured$TcpAddressConfigured</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">IntegrationAutoConfiguration$IntegrationRSocketConfiguration$IntegrationRSocketClientConfiguration$RemoteRSocketServerAddressConfigured$WebSocketAddressConfigured</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">IntegrationAutoConfiguration$IntegrationRSocketConfiguration$IntegrationRSocketServerConfiguration</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">IntegrationAutoConfiguration$IntegrationTaskSchedulerConfiguration</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">IntegrationAutoConfiguration$OnIntegrationDatasourceInitializationCondition</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/29)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/84)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp; * Copyright 2012-2023 the original author or authors.
&nbsp; *
&nbsp; * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
&nbsp; * you may not use this file except in compliance with the License.
&nbsp; * You may obtain a copy of the License at
&nbsp; *
&nbsp; *      https://www.apache.org/licenses/LICENSE-2.0
&nbsp; *
&nbsp; * Unless required by applicable law or agreed to in writing, software
&nbsp; * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
&nbsp; * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
&nbsp; * See the License for the specific language governing permissions and
&nbsp; * limitations under the License.
&nbsp; */
&nbsp;
&nbsp;package org.springframework.boot.autoconfigure.integration;
&nbsp;
&nbsp;import java.time.Duration;
&nbsp;
&nbsp;import javax.management.MBeanServer;
&nbsp;import javax.sql.DataSource;
&nbsp;
&nbsp;import io.rsocket.transport.netty.server.TcpServerTransport;
&nbsp;
&nbsp;import org.springframework.beans.factory.BeanFactory;
&nbsp;import org.springframework.beans.factory.ObjectProvider;
&nbsp;import org.springframework.boot.autoconfigure.AutoConfiguration;
&nbsp;import org.springframework.boot.autoconfigure.AutoConfigureBefore;
&nbsp;import org.springframework.boot.autoconfigure.condition.AnyNestedCondition;
&nbsp;import org.springframework.boot.autoconfigure.condition.ConditionalOnBean;
&nbsp;import org.springframework.boot.autoconfigure.condition.ConditionalOnClass;
&nbsp;import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;
&nbsp;import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;
&nbsp;import org.springframework.boot.autoconfigure.condition.ConditionalOnSingleCandidate;
&nbsp;import org.springframework.boot.autoconfigure.condition.SearchStrategy;
&nbsp;import org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;
&nbsp;import org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration;
&nbsp;import org.springframework.boot.autoconfigure.jmx.JmxProperties;
&nbsp;import org.springframework.boot.autoconfigure.rsocket.RSocketMessagingAutoConfiguration;
&nbsp;import org.springframework.boot.autoconfigure.sql.init.OnDatabaseInitializationCondition;
&nbsp;import org.springframework.boot.autoconfigure.task.TaskSchedulingAutoConfiguration;
&nbsp;import org.springframework.boot.context.properties.EnableConfigurationProperties;
&nbsp;import org.springframework.boot.context.properties.PropertyMapper;
&nbsp;import org.springframework.boot.context.properties.source.MutuallyExclusiveConfigurationPropertiesException;
&nbsp;import org.springframework.boot.task.TaskSchedulerBuilder;
&nbsp;import org.springframework.boot.task.ThreadPoolTaskSchedulerBuilder;
&nbsp;import org.springframework.context.annotation.Bean;
&nbsp;import org.springframework.context.annotation.Conditional;
&nbsp;import org.springframework.context.annotation.Configuration;
&nbsp;import org.springframework.context.annotation.Import;
&nbsp;import org.springframework.integration.config.EnableIntegration;
&nbsp;import org.springframework.integration.config.EnableIntegrationManagement;
&nbsp;import org.springframework.integration.config.IntegrationComponentScanRegistrar;
&nbsp;import org.springframework.integration.config.IntegrationManagementConfigurer;
&nbsp;import org.springframework.integration.context.IntegrationContextUtils;
&nbsp;import org.springframework.integration.jdbc.store.JdbcMessageStore;
&nbsp;import org.springframework.integration.jmx.config.EnableIntegrationMBeanExport;
&nbsp;import org.springframework.integration.monitor.IntegrationMBeanExporter;
&nbsp;import org.springframework.integration.rsocket.ClientRSocketConnector;
&nbsp;import org.springframework.integration.rsocket.IntegrationRSocketEndpoint;
&nbsp;import org.springframework.integration.rsocket.ServerRSocketConnector;
&nbsp;import org.springframework.integration.rsocket.ServerRSocketMessageHandler;
&nbsp;import org.springframework.integration.rsocket.outbound.RSocketOutboundGateway;
&nbsp;import org.springframework.integration.scheduling.PollerMetadata;
&nbsp;import org.springframework.messaging.rsocket.RSocketRequester;
&nbsp;import org.springframework.messaging.rsocket.RSocketStrategies;
&nbsp;import org.springframework.messaging.rsocket.annotation.support.RSocketMessageHandler;
&nbsp;import org.springframework.scheduling.Trigger;
&nbsp;import org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler;
&nbsp;import org.springframework.scheduling.support.CronTrigger;
&nbsp;import org.springframework.scheduling.support.PeriodicTrigger;
&nbsp;import org.springframework.util.StringUtils;
&nbsp;
&nbsp;/**
&nbsp; * {@link org.springframework.boot.autoconfigure.EnableAutoConfiguration
&nbsp; * Auto-configuration} for Spring Integration.
&nbsp; *
&nbsp; * @author Artem Bilan
&nbsp; * @author Dave Syer
&nbsp; * @author Stephane Nicoll
&nbsp; * @author Vedran Pavic
&nbsp; * @author Madhura Bhave
&nbsp; * @since 1.1.0
&nbsp; */
&nbsp;@AutoConfiguration(after = { DataSourceAutoConfiguration.class, JmxAutoConfiguration.class,
&nbsp;		TaskSchedulingAutoConfiguration.class })
&nbsp;@ConditionalOnClass(EnableIntegration.class)
&nbsp;@EnableConfigurationProperties({ IntegrationProperties.class, JmxProperties.class })
<b class="nc">&nbsp;public class IntegrationAutoConfiguration {</b>
&nbsp;
&nbsp;	@Bean(name = IntegrationContextUtils.INTEGRATION_GLOBAL_PROPERTIES_BEAN_NAME)
&nbsp;	@ConditionalOnMissingBean(name = IntegrationContextUtils.INTEGRATION_GLOBAL_PROPERTIES_BEAN_NAME)
&nbsp;	public static org.springframework.integration.context.IntegrationProperties integrationGlobalProperties(
&nbsp;			IntegrationProperties properties) {
<b class="nc">&nbsp;		org.springframework.integration.context.IntegrationProperties integrationProperties = new org.springframework.integration.context.IntegrationProperties();</b>
<b class="nc">&nbsp;		PropertyMapper map = PropertyMapper.get().alwaysApplyingWhenNonNull();</b>
<b class="nc">&nbsp;		map.from(properties.getChannel().isAutoCreate()).to(integrationProperties::setChannelsAutoCreate);</b>
<b class="nc">&nbsp;		map.from(properties.getChannel().getMaxUnicastSubscribers())</b>
<b class="nc">&nbsp;			.to(integrationProperties::setChannelsMaxUnicastSubscribers);</b>
<b class="nc">&nbsp;		map.from(properties.getChannel().getMaxBroadcastSubscribers())</b>
<b class="nc">&nbsp;			.to(integrationProperties::setChannelsMaxBroadcastSubscribers);</b>
<b class="nc">&nbsp;		map.from(properties.getError().isRequireSubscribers())</b>
<b class="nc">&nbsp;			.to(integrationProperties::setErrorChannelRequireSubscribers);</b>
<b class="nc">&nbsp;		map.from(properties.getError().isIgnoreFailures()).to(integrationProperties::setErrorChannelIgnoreFailures);</b>
<b class="nc">&nbsp;		map.from(properties.getEndpoint().isThrowExceptionOnLateReply())</b>
<b class="nc">&nbsp;			.to(integrationProperties::setMessagingTemplateThrowExceptionOnLateReply);</b>
<b class="nc">&nbsp;		map.from(properties.getEndpoint().getReadOnlyHeaders())</b>
<b class="nc">&nbsp;			.as(StringUtils::toStringArray)</b>
<b class="nc">&nbsp;			.to(integrationProperties::setReadOnlyHeaders);</b>
<b class="nc">&nbsp;		map.from(properties.getEndpoint().getNoAutoStartup())</b>
<b class="nc">&nbsp;			.as(StringUtils::toStringArray)</b>
<b class="nc">&nbsp;			.to(integrationProperties::setNoAutoStartupEndpoints);</b>
<b class="nc">&nbsp;		return integrationProperties;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Basic Spring Integration configuration.
&nbsp;	 */
&nbsp;	@Configuration(proxyBeanMethods = false)
&nbsp;	@EnableIntegration
<b class="nc">&nbsp;	protected static class IntegrationConfiguration {</b>
&nbsp;
&nbsp;		@Bean(PollerMetadata.DEFAULT_POLLER)
&nbsp;		@ConditionalOnMissingBean(name = PollerMetadata.DEFAULT_POLLER)
&nbsp;		public PollerMetadata defaultPollerMetadata(IntegrationProperties integrationProperties) {
<b class="nc">&nbsp;			IntegrationProperties.Poller poller = integrationProperties.getPoller();</b>
<b class="nc">&nbsp;			MutuallyExclusiveConfigurationPropertiesException.throwIfMultipleNonNullValuesIn((entries) -&gt; {</b>
<b class="nc">&nbsp;				entries.put(&quot;spring.integration.poller.cron&quot;,</b>
<b class="nc">&nbsp;						StringUtils.hasText(poller.getCron()) ? poller.getCron() : null);</b>
<b class="nc">&nbsp;				entries.put(&quot;spring.integration.poller.fixed-delay&quot;, poller.getFixedDelay());</b>
<b class="nc">&nbsp;				entries.put(&quot;spring.integration.poller.fixed-rate&quot;, poller.getFixedRate());</b>
&nbsp;			});
<b class="nc">&nbsp;			PollerMetadata pollerMetadata = new PollerMetadata();</b>
<b class="nc">&nbsp;			PropertyMapper map = PropertyMapper.get().alwaysApplyingWhenNonNull();</b>
<b class="nc">&nbsp;			map.from(poller::getMaxMessagesPerPoll).to(pollerMetadata::setMaxMessagesPerPoll);</b>
<b class="nc">&nbsp;			map.from(poller::getReceiveTimeout).as(Duration::toMillis).to(pollerMetadata::setReceiveTimeout);</b>
<b class="nc">&nbsp;			map.from(poller).as(this::asTrigger).to(pollerMetadata::setTrigger);</b>
<b class="nc">&nbsp;			return pollerMetadata;</b>
&nbsp;		}
&nbsp;
&nbsp;		private Trigger asTrigger(IntegrationProperties.Poller poller) {
<b class="nc">&nbsp;			if (StringUtils.hasText(poller.getCron())) {</b>
<b class="nc">&nbsp;				return new CronTrigger(poller.getCron());</b>
&nbsp;			}
<b class="nc">&nbsp;			if (poller.getFixedDelay() != null) {</b>
<b class="nc">&nbsp;				return createPeriodicTrigger(poller.getFixedDelay(), poller.getInitialDelay(), false);</b>
&nbsp;			}
<b class="nc">&nbsp;			if (poller.getFixedRate() != null) {</b>
<b class="nc">&nbsp;				return createPeriodicTrigger(poller.getFixedRate(), poller.getInitialDelay(), true);</b>
&nbsp;			}
<b class="nc">&nbsp;			return null;</b>
&nbsp;		}
&nbsp;
&nbsp;		private Trigger createPeriodicTrigger(Duration period, Duration initialDelay, boolean fixedRate) {
<b class="nc">&nbsp;			PeriodicTrigger trigger = new PeriodicTrigger(period);</b>
<b class="nc">&nbsp;			if (initialDelay != null) {</b>
<b class="nc">&nbsp;				trigger.setInitialDelay(initialDelay);</b>
&nbsp;			}
<b class="nc">&nbsp;			trigger.setFixedRate(fixedRate);</b>
<b class="nc">&nbsp;			return trigger;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Expose a standard {@link ThreadPoolTaskScheduler} if the user has not enabled task
&nbsp;	 * scheduling explicitly.
&nbsp;	 */
&nbsp;	@Configuration(proxyBeanMethods = false)
&nbsp;	@ConditionalOnBean(TaskSchedulerBuilder.class)
&nbsp;	@ConditionalOnMissingBean(name = IntegrationContextUtils.TASK_SCHEDULER_BEAN_NAME)
&nbsp;	@SuppressWarnings(&quot;removal&quot;)
<b class="nc">&nbsp;	protected static class IntegrationTaskSchedulerConfiguration {</b>
&nbsp;
&nbsp;		@Bean(name = IntegrationContextUtils.TASK_SCHEDULER_BEAN_NAME)
&nbsp;		public ThreadPoolTaskScheduler taskScheduler(TaskSchedulerBuilder taskSchedulerBuilder,
&nbsp;				ObjectProvider&lt;ThreadPoolTaskSchedulerBuilder&gt; threadPoolTaskSchedulerBuilderProvider) {
<b class="nc">&nbsp;			ThreadPoolTaskSchedulerBuilder threadPoolTaskSchedulerBuilder = threadPoolTaskSchedulerBuilderProvider</b>
<b class="nc">&nbsp;				.getIfUnique();</b>
<b class="nc">&nbsp;			if (threadPoolTaskSchedulerBuilder != null) {</b>
<b class="nc">&nbsp;				return threadPoolTaskSchedulerBuilder.build();</b>
&nbsp;			}
<b class="nc">&nbsp;			return taskSchedulerBuilder.build();</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Spring Integration JMX configuration.
&nbsp;	 */
&nbsp;	@Configuration(proxyBeanMethods = false)
&nbsp;	@ConditionalOnClass(EnableIntegrationMBeanExport.class)
&nbsp;	@ConditionalOnMissingBean(value = IntegrationMBeanExporter.class, search = SearchStrategy.CURRENT)
&nbsp;	@ConditionalOnBean(MBeanServer.class)
&nbsp;	@ConditionalOnProperty(prefix = &quot;spring.jmx&quot;, name = &quot;enabled&quot;, havingValue = &quot;true&quot;, matchIfMissing = true)
<b class="nc">&nbsp;	protected static class IntegrationJmxConfiguration {</b>
&nbsp;
&nbsp;		@Bean
&nbsp;		public IntegrationMBeanExporter integrationMbeanExporter(BeanFactory beanFactory, JmxProperties properties) {
<b class="nc">&nbsp;			IntegrationMBeanExporter exporter = new IntegrationMBeanExporter();</b>
<b class="nc">&nbsp;			String defaultDomain = properties.getDefaultDomain();</b>
<b class="nc">&nbsp;			if (StringUtils.hasLength(defaultDomain)) {</b>
<b class="nc">&nbsp;				exporter.setDefaultDomain(defaultDomain);</b>
&nbsp;			}
<b class="nc">&nbsp;			exporter.setServer(beanFactory.getBean(properties.getServer(), MBeanServer.class));</b>
<b class="nc">&nbsp;			return exporter;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Integration management configuration.
&nbsp;	 */
&nbsp;	@Configuration(proxyBeanMethods = false)
&nbsp;	@ConditionalOnClass(EnableIntegrationManagement.class)
&nbsp;	@ConditionalOnMissingBean(value = IntegrationManagementConfigurer.class,
&nbsp;			name = IntegrationManagementConfigurer.MANAGEMENT_CONFIGURER_NAME, search = SearchStrategy.CURRENT)
<b class="nc">&nbsp;	protected static class IntegrationManagementConfiguration {</b>
&nbsp;
&nbsp;		@Configuration(proxyBeanMethods = false)
&nbsp;		@EnableIntegrationManagement(
&nbsp;				defaultLoggingEnabled = &quot;${spring.integration.management.default-logging-enabled:true}&quot;,
&nbsp;				observationPatterns = &quot;${spring.integration.management.observation-patterns:}&quot;)
<b class="nc">&nbsp;		protected static class EnableIntegrationManagementConfiguration {</b>
&nbsp;
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Integration component scan configuration.
&nbsp;	 */
&nbsp;	@Configuration(proxyBeanMethods = false)
&nbsp;	@ConditionalOnMissingBean(IntegrationComponentScanRegistrar.class)
&nbsp;	@Import(IntegrationAutoConfigurationScanRegistrar.class)
<b class="nc">&nbsp;	protected static class IntegrationComponentScanConfiguration {</b>
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Integration JDBC configuration.
&nbsp;	 */
&nbsp;	@Configuration(proxyBeanMethods = false)
&nbsp;	@ConditionalOnClass(JdbcMessageStore.class)
&nbsp;	@ConditionalOnSingleCandidate(DataSource.class)
&nbsp;	@Conditional(OnIntegrationDatasourceInitializationCondition.class)
<b class="nc">&nbsp;	protected static class IntegrationJdbcConfiguration {</b>
&nbsp;
&nbsp;		@Bean
&nbsp;		@ConditionalOnMissingBean(IntegrationDataSourceScriptDatabaseInitializer.class)
&nbsp;		public IntegrationDataSourceScriptDatabaseInitializer integrationDataSourceInitializer(DataSource dataSource,
&nbsp;				IntegrationProperties properties) {
<b class="nc">&nbsp;			return new IntegrationDataSourceScriptDatabaseInitializer(dataSource, properties.getJdbc());</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Integration RSocket configuration.
&nbsp;	 */
&nbsp;	@Configuration(proxyBeanMethods = false)
&nbsp;	@ConditionalOnClass({ IntegrationRSocketEndpoint.class, RSocketRequester.class, io.rsocket.RSocket.class })
&nbsp;	@Conditional(IntegrationRSocketConfiguration.AnyRSocketChannelAdapterAvailable.class)
<b class="nc">&nbsp;	protected static class IntegrationRSocketConfiguration {</b>
&nbsp;
&nbsp;		/**
&nbsp;		 * Check if either an {@link IntegrationRSocketEndpoint} or
&nbsp;		 * {@link RSocketOutboundGateway} bean is available.
&nbsp;		 */
&nbsp;		static class AnyRSocketChannelAdapterAvailable extends AnyNestedCondition {
&nbsp;
&nbsp;			AnyRSocketChannelAdapterAvailable() {
<b class="nc">&nbsp;				super(ConfigurationPhase.REGISTER_BEAN);</b>
&nbsp;			}
&nbsp;
&nbsp;			@ConditionalOnBean(IntegrationRSocketEndpoint.class)
<b class="nc">&nbsp;			static class IntegrationRSocketEndpointAvailable {</b>
&nbsp;
&nbsp;			}
&nbsp;
&nbsp;			@ConditionalOnBean(RSocketOutboundGateway.class)
<b class="nc">&nbsp;			static class RSocketOutboundGatewayAvailable {</b>
&nbsp;
&nbsp;			}
&nbsp;
&nbsp;		}
&nbsp;
&nbsp;		@Configuration(proxyBeanMethods = false)
&nbsp;		@ConditionalOnClass(TcpServerTransport.class)
&nbsp;		@AutoConfigureBefore(RSocketMessagingAutoConfiguration.class)
<b class="nc">&nbsp;		protected static class IntegrationRSocketServerConfiguration {</b>
&nbsp;
&nbsp;			@Bean
&nbsp;			@ConditionalOnMissingBean(ServerRSocketMessageHandler.class)
&nbsp;			public RSocketMessageHandler serverRSocketMessageHandler(RSocketStrategies rSocketStrategies,
&nbsp;					IntegrationProperties integrationProperties) {
&nbsp;
<b class="nc">&nbsp;				RSocketMessageHandler messageHandler = new ServerRSocketMessageHandler(</b>
<b class="nc">&nbsp;						integrationProperties.getRsocket().getServer().isMessageMappingEnabled());</b>
<b class="nc">&nbsp;				messageHandler.setRSocketStrategies(rSocketStrategies);</b>
<b class="nc">&nbsp;				return messageHandler;</b>
&nbsp;			}
&nbsp;
&nbsp;			@Bean
&nbsp;			@ConditionalOnMissingBean
&nbsp;			public ServerRSocketConnector serverRSocketConnector(ServerRSocketMessageHandler messageHandler) {
<b class="nc">&nbsp;				return new ServerRSocketConnector(messageHandler);</b>
&nbsp;			}
&nbsp;
&nbsp;		}
&nbsp;
&nbsp;		@Configuration(proxyBeanMethods = false)
<b class="nc">&nbsp;		protected static class IntegrationRSocketClientConfiguration {</b>
&nbsp;
&nbsp;			@Bean
&nbsp;			@ConditionalOnMissingBean
&nbsp;			@Conditional(RemoteRSocketServerAddressConfigured.class)
&nbsp;			public ClientRSocketConnector clientRSocketConnector(IntegrationProperties integrationProperties,
&nbsp;					RSocketStrategies rSocketStrategies) {
&nbsp;
<b class="nc">&nbsp;				IntegrationProperties.RSocket.Client client = integrationProperties.getRsocket().getClient();</b>
<b class="nc">&nbsp;				ClientRSocketConnector clientRSocketConnector = (client.getUri() != null)</b>
<b class="nc">&nbsp;						? new ClientRSocketConnector(client.getUri())</b>
<b class="nc">&nbsp;						: new ClientRSocketConnector(client.getHost(), client.getPort());</b>
<b class="nc">&nbsp;				clientRSocketConnector.setRSocketStrategies(rSocketStrategies);</b>
<b class="nc">&nbsp;				return clientRSocketConnector;</b>
&nbsp;			}
&nbsp;
&nbsp;			/**
&nbsp;			 * Check if a remote address is configured for the RSocket Integration client.
&nbsp;			 */
&nbsp;			static class RemoteRSocketServerAddressConfigured extends AnyNestedCondition {
&nbsp;
&nbsp;				RemoteRSocketServerAddressConfigured() {
<b class="nc">&nbsp;					super(ConfigurationPhase.REGISTER_BEAN);</b>
&nbsp;				}
&nbsp;
&nbsp;				@ConditionalOnProperty(prefix = &quot;spring.integration.rsocket.client&quot;, name = &quot;uri&quot;)
<b class="nc">&nbsp;				static class WebSocketAddressConfigured {</b>
&nbsp;
&nbsp;				}
&nbsp;
&nbsp;				@ConditionalOnProperty(prefix = &quot;spring.integration.rsocket.client&quot;, name = { &quot;host&quot;, &quot;port&quot; })
<b class="nc">&nbsp;				static class TcpAddressConfigured {</b>
&nbsp;
&nbsp;				}
&nbsp;
&nbsp;			}
&nbsp;
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	static class OnIntegrationDatasourceInitializationCondition extends OnDatabaseInitializationCondition {
&nbsp;
&nbsp;		OnIntegrationDatasourceInitializationCondition() {
<b class="nc">&nbsp;			super(&quot;Integration&quot;, &quot;spring.integration.jdbc.initialize-schema&quot;);</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-04-01 11:12</div>
</div>
</body>
</html>
