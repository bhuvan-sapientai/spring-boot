


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > QuartzEndpoint</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.springframework.boot.actuate.quartz</a>
</div>

<h1>Coverage Summary for Class: QuartzEndpoint (org.springframework.boot.actuate.quartz)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">QuartzEndpoint</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/20)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/108)
  </span>
</td>
</tr>
  <tr>
    <td class="name">QuartzEndpoint$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">QuartzEndpoint$CalendarIntervalTriggerDescriptor</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/11)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">QuartzEndpoint$CronTriggerDescriptor</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">QuartzEndpoint$CustomTriggerDescriptor</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">QuartzEndpoint$DailyTimeIntervalTriggerDescriptor</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/11)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">QuartzEndpoint$GroupNamesDescriptor</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">QuartzEndpoint$QuartzDescriptor</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">QuartzEndpoint$QuartzGroupsDescriptor</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">QuartzEndpoint$QuartzJobDetailsDescriptor</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/9)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/17)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">QuartzEndpoint$QuartzJobGroupSummaryDescriptor</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">QuartzEndpoint$QuartzJobSummaryDescriptor</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">QuartzEndpoint$QuartzTriggerGroupSummaryDescriptor</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/7)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">QuartzEndpoint$QuartzTriggerGroupSummaryDescriptor$Triggers</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/13)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">QuartzEndpoint$SimpleTriggerDescriptor</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">QuartzEndpoint$TriggerDescriptor</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/12)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/45)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">QuartzEndpoint$TriggerType</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/9)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/84)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/256)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp; * Copyright 2012-2023 the original author or authors.
&nbsp; *
&nbsp; * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
&nbsp; * you may not use this file except in compliance with the License.
&nbsp; * You may obtain a copy of the License at
&nbsp; *
&nbsp; *      https://www.apache.org/licenses/LICENSE-2.0
&nbsp; *
&nbsp; * Unless required by applicable law or agreed to in writing, software
&nbsp; * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
&nbsp; * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
&nbsp; * See the License for the specific language governing permissions and
&nbsp; * limitations under the License.
&nbsp; */
&nbsp;
&nbsp;package org.springframework.boot.actuate.quartz;
&nbsp;
&nbsp;import java.time.Duration;
&nbsp;import java.time.LocalTime;
&nbsp;import java.time.temporal.ChronoUnit;
&nbsp;import java.time.temporal.TemporalUnit;
&nbsp;import java.util.ArrayList;
&nbsp;import java.util.Collections;
&nbsp;import java.util.Comparator;
&nbsp;import java.util.LinkedHashMap;
&nbsp;import java.util.LinkedHashSet;
&nbsp;import java.util.List;
&nbsp;import java.util.Map;
&nbsp;import java.util.Set;
&nbsp;import java.util.function.Function;
&nbsp;
&nbsp;import org.quartz.CalendarIntervalTrigger;
&nbsp;import org.quartz.CronTrigger;
&nbsp;import org.quartz.DailyTimeIntervalTrigger;
&nbsp;import org.quartz.DateBuilder.IntervalUnit;
&nbsp;import org.quartz.Job;
&nbsp;import org.quartz.JobDataMap;
&nbsp;import org.quartz.JobDetail;
&nbsp;import org.quartz.JobKey;
&nbsp;import org.quartz.Scheduler;
&nbsp;import org.quartz.SchedulerException;
&nbsp;import org.quartz.SimpleTrigger;
&nbsp;import org.quartz.TimeOfDay;
&nbsp;import org.quartz.Trigger;
&nbsp;import org.quartz.Trigger.TriggerState;
&nbsp;import org.quartz.TriggerKey;
&nbsp;import org.quartz.impl.matchers.GroupMatcher;
&nbsp;
&nbsp;import org.springframework.boot.actuate.endpoint.OperationResponseBody;
&nbsp;import org.springframework.boot.actuate.endpoint.SanitizableData;
&nbsp;import org.springframework.boot.actuate.endpoint.Sanitizer;
&nbsp;import org.springframework.boot.actuate.endpoint.SanitizingFunction;
&nbsp;import org.springframework.boot.actuate.endpoint.annotation.Endpoint;
&nbsp;import org.springframework.boot.actuate.endpoint.annotation.ReadOperation;
&nbsp;import org.springframework.util.Assert;
&nbsp;
&nbsp;/**
&nbsp; * {@link Endpoint} to expose Quartz Scheduler jobs and triggers.
&nbsp; *
&nbsp; * @author Vedran Pavic
&nbsp; * @author Stephane Nicoll
&nbsp; * @since 2.5.0
&nbsp; */
&nbsp;@Endpoint(id = &quot;quartz&quot;)
&nbsp;public class QuartzEndpoint {
&nbsp;
<b class="nc">&nbsp;	private static final Comparator&lt;Trigger&gt; TRIGGER_COMPARATOR = Comparator</b>
<b class="nc">&nbsp;		.comparing(Trigger::getNextFireTime, Comparator.nullsLast(Comparator.naturalOrder()))</b>
<b class="nc">&nbsp;		.thenComparing(Comparator.comparingInt(Trigger::getPriority).reversed());</b>
&nbsp;
&nbsp;	private final Scheduler scheduler;
&nbsp;
&nbsp;	private final Sanitizer sanitizer;
&nbsp;
<b class="nc">&nbsp;	public QuartzEndpoint(Scheduler scheduler, Iterable&lt;SanitizingFunction&gt; sanitizingFunctions) {</b>
<b class="nc">&nbsp;		Assert.notNull(scheduler, &quot;Scheduler must not be null&quot;);</b>
<b class="nc">&nbsp;		this.scheduler = scheduler;</b>
<b class="nc">&nbsp;		this.sanitizer = new Sanitizer(sanitizingFunctions);</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Return the available job and trigger group names.
&nbsp;	 * @return a report of the available group names
&nbsp;	 * @throws SchedulerException if retrieving the information from the scheduler failed
&nbsp;	 */
&nbsp;	@ReadOperation
&nbsp;	public QuartzDescriptor quartzReport() throws SchedulerException {
<b class="nc">&nbsp;		return new QuartzDescriptor(new GroupNamesDescriptor(this.scheduler.getJobGroupNames()),</b>
<b class="nc">&nbsp;				new GroupNamesDescriptor(this.scheduler.getTriggerGroupNames()));</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Return the available job names, identified by group name.
&nbsp;	 * @return the available job names
&nbsp;	 * @throws SchedulerException if retrieving the information from the scheduler failed
&nbsp;	 */
&nbsp;	public QuartzGroupsDescriptor quartzJobGroups() throws SchedulerException {
<b class="nc">&nbsp;		Map&lt;String, Object&gt; result = new LinkedHashMap&lt;&gt;();</b>
<b class="nc">&nbsp;		for (String groupName : this.scheduler.getJobGroupNames()) {</b>
<b class="nc">&nbsp;			List&lt;String&gt; jobs = this.scheduler.getJobKeys(GroupMatcher.jobGroupEquals(groupName))</b>
<b class="nc">&nbsp;				.stream()</b>
<b class="nc">&nbsp;				.map((key) -&gt; key.getName())</b>
<b class="nc">&nbsp;				.toList();</b>
<b class="nc">&nbsp;			result.put(groupName, Collections.singletonMap(&quot;jobs&quot;, jobs));</b>
<b class="nc">&nbsp;		}</b>
<b class="nc">&nbsp;		return new QuartzGroupsDescriptor(result);</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Return the available trigger names, identified by group name.
&nbsp;	 * @return the available trigger names
&nbsp;	 * @throws SchedulerException if retrieving the information from the scheduler failed
&nbsp;	 */
&nbsp;	public QuartzGroupsDescriptor quartzTriggerGroups() throws SchedulerException {
<b class="nc">&nbsp;		Map&lt;String, Object&gt; result = new LinkedHashMap&lt;&gt;();</b>
<b class="nc">&nbsp;		Set&lt;String&gt; pausedTriggerGroups = this.scheduler.getPausedTriggerGroups();</b>
<b class="nc">&nbsp;		for (String groupName : this.scheduler.getTriggerGroupNames()) {</b>
<b class="nc">&nbsp;			Map&lt;String, Object&gt; groupDetails = new LinkedHashMap&lt;&gt;();</b>
<b class="nc">&nbsp;			groupDetails.put(&quot;paused&quot;, pausedTriggerGroups.contains(groupName));</b>
<b class="nc">&nbsp;			groupDetails.put(&quot;triggers&quot;,</b>
<b class="nc">&nbsp;					this.scheduler.getTriggerKeys(GroupMatcher.triggerGroupEquals(groupName))</b>
<b class="nc">&nbsp;						.stream()</b>
<b class="nc">&nbsp;						.map((key) -&gt; key.getName())</b>
<b class="nc">&nbsp;						.toList());</b>
<b class="nc">&nbsp;			result.put(groupName, groupDetails);</b>
<b class="nc">&nbsp;		}</b>
<b class="nc">&nbsp;		return new QuartzGroupsDescriptor(result);</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Return a summary of the jobs group with the specified name or {@code null} if no
&nbsp;	 * such group exists.
&nbsp;	 * @param group the name of a jobs group
&nbsp;	 * @return a summary of the jobs in the given {@code group}
&nbsp;	 * @throws SchedulerException if retrieving the information from the scheduler failed
&nbsp;	 */
&nbsp;	public QuartzJobGroupSummaryDescriptor quartzJobGroupSummary(String group) throws SchedulerException {
<b class="nc">&nbsp;		List&lt;JobDetail&gt; jobs = findJobsByGroup(group);</b>
<b class="nc">&nbsp;		if (jobs.isEmpty() &amp;&amp; !this.scheduler.getJobGroupNames().contains(group)) {</b>
<b class="nc">&nbsp;			return null;</b>
&nbsp;		}
<b class="nc">&nbsp;		Map&lt;String, QuartzJobSummaryDescriptor&gt; result = new LinkedHashMap&lt;&gt;();</b>
<b class="nc">&nbsp;		for (JobDetail job : jobs) {</b>
<b class="nc">&nbsp;			result.put(job.getKey().getName(), QuartzJobSummaryDescriptor.of(job));</b>
<b class="nc">&nbsp;		}</b>
<b class="nc">&nbsp;		return new QuartzJobGroupSummaryDescriptor(group, result);</b>
&nbsp;	}
&nbsp;
&nbsp;	private List&lt;JobDetail&gt; findJobsByGroup(String group) throws SchedulerException {
<b class="nc">&nbsp;		List&lt;JobDetail&gt; jobs = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;		Set&lt;JobKey&gt; jobKeys = this.scheduler.getJobKeys(GroupMatcher.jobGroupEquals(group));</b>
<b class="nc">&nbsp;		for (JobKey jobKey : jobKeys) {</b>
<b class="nc">&nbsp;			jobs.add(this.scheduler.getJobDetail(jobKey));</b>
<b class="nc">&nbsp;		}</b>
<b class="nc">&nbsp;		return jobs;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Return a summary of the triggers group with the specified name or {@code null} if
&nbsp;	 * no such group exists.
&nbsp;	 * @param group the name of a triggers group
&nbsp;	 * @return a summary of the triggers in the given {@code group}
&nbsp;	 * @throws SchedulerException if retrieving the information from the scheduler failed
&nbsp;	 */
&nbsp;	public QuartzTriggerGroupSummaryDescriptor quartzTriggerGroupSummary(String group) throws SchedulerException {
<b class="nc">&nbsp;		List&lt;Trigger&gt; triggers = findTriggersByGroup(group);</b>
<b class="nc">&nbsp;		if (triggers.isEmpty() &amp;&amp; !this.scheduler.getTriggerGroupNames().contains(group)) {</b>
<b class="nc">&nbsp;			return null;</b>
&nbsp;		}
<b class="nc">&nbsp;		Map&lt;TriggerType, Map&lt;String, Object&gt;&gt; result = new LinkedHashMap&lt;&gt;();</b>
<b class="nc">&nbsp;		triggers.forEach((trigger) -&gt; {</b>
<b class="nc">&nbsp;			TriggerDescriptor triggerDescriptor = TriggerDescriptor.of(trigger);</b>
<b class="nc">&nbsp;			Map&lt;String, Object&gt; triggerTypes = result.computeIfAbsent(triggerDescriptor.getType(),</b>
<b class="nc">&nbsp;					(key) -&gt; new LinkedHashMap&lt;&gt;());</b>
<b class="nc">&nbsp;			triggerTypes.put(trigger.getKey().getName(), triggerDescriptor.buildSummary(true));</b>
&nbsp;		});
<b class="nc">&nbsp;		boolean paused = this.scheduler.getPausedTriggerGroups().contains(group);</b>
<b class="nc">&nbsp;		return new QuartzTriggerGroupSummaryDescriptor(group, paused, result);</b>
&nbsp;	}
&nbsp;
&nbsp;	private List&lt;Trigger&gt; findTriggersByGroup(String group) throws SchedulerException {
<b class="nc">&nbsp;		List&lt;Trigger&gt; triggers = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;		Set&lt;TriggerKey&gt; triggerKeys = this.scheduler.getTriggerKeys(GroupMatcher.triggerGroupEquals(group));</b>
<b class="nc">&nbsp;		for (TriggerKey triggerKey : triggerKeys) {</b>
<b class="nc">&nbsp;			triggers.add(this.scheduler.getTrigger(triggerKey));</b>
<b class="nc">&nbsp;		}</b>
<b class="nc">&nbsp;		return triggers;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Return the {@link QuartzJobDetailsDescriptor details of the job} identified with
&nbsp;	 * the given group name and job name.
&nbsp;	 * @param groupName the name of the group
&nbsp;	 * @param jobName the name of the job
&nbsp;	 * @param showUnsanitized whether to sanitize values in data map
&nbsp;	 * @return the details of the job or {@code null} if such job does not exist
&nbsp;	 * @throws SchedulerException if retrieving the information from the scheduler failed
&nbsp;	 */
&nbsp;	public QuartzJobDetailsDescriptor quartzJob(String groupName, String jobName, boolean showUnsanitized)
&nbsp;			throws SchedulerException {
<b class="nc">&nbsp;		JobKey jobKey = JobKey.jobKey(jobName, groupName);</b>
<b class="nc">&nbsp;		JobDetail jobDetail = this.scheduler.getJobDetail(jobKey);</b>
<b class="nc">&nbsp;		if (jobDetail != null) {</b>
<b class="nc">&nbsp;			List&lt;? extends Trigger&gt; triggers = this.scheduler.getTriggersOfJob(jobKey);</b>
<b class="nc">&nbsp;			return new QuartzJobDetailsDescriptor(jobDetail.getKey().getGroup(), jobDetail.getKey().getName(),</b>
<b class="nc">&nbsp;					jobDetail.getDescription(), jobDetail.getJobClass().getName(), jobDetail.isDurable(),</b>
<b class="nc">&nbsp;					jobDetail.requestsRecovery(), sanitizeJobDataMap(jobDetail.getJobDataMap(), showUnsanitized),</b>
<b class="nc">&nbsp;					extractTriggersSummary(triggers));</b>
&nbsp;		}
<b class="nc">&nbsp;		return null;</b>
&nbsp;	}
&nbsp;
&nbsp;	private static List&lt;Map&lt;String, Object&gt;&gt; extractTriggersSummary(List&lt;? extends Trigger&gt; triggers) {
<b class="nc">&nbsp;		List&lt;Trigger&gt; triggersToSort = new ArrayList&lt;&gt;(triggers);</b>
<b class="nc">&nbsp;		triggersToSort.sort(TRIGGER_COMPARATOR);</b>
<b class="nc">&nbsp;		List&lt;Map&lt;String, Object&gt;&gt; result = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;		triggersToSort.forEach((trigger) -&gt; {</b>
<b class="nc">&nbsp;			Map&lt;String, Object&gt; triggerSummary = new LinkedHashMap&lt;&gt;();</b>
<b class="nc">&nbsp;			triggerSummary.put(&quot;group&quot;, trigger.getKey().getGroup());</b>
<b class="nc">&nbsp;			triggerSummary.put(&quot;name&quot;, trigger.getKey().getName());</b>
<b class="nc">&nbsp;			triggerSummary.putAll(TriggerDescriptor.of(trigger).buildSummary(false));</b>
<b class="nc">&nbsp;			result.add(triggerSummary);</b>
&nbsp;		});
<b class="nc">&nbsp;		return result;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Return the details of the trigger identified by the given group name and trigger
&nbsp;	 * name.
&nbsp;	 * @param groupName the name of the group
&nbsp;	 * @param triggerName the name of the trigger
&nbsp;	 * @param showUnsanitized whether to sanitize values in data map
&nbsp;	 * @return the details of the trigger or {@code null} if such trigger does not exist
&nbsp;	 * @throws SchedulerException if retrieving the information from the scheduler failed
&nbsp;	 */
&nbsp;	Map&lt;String, Object&gt; quartzTrigger(String groupName, String triggerName, boolean showUnsanitized)
&nbsp;			throws SchedulerException {
<b class="nc">&nbsp;		TriggerKey triggerKey = TriggerKey.triggerKey(triggerName, groupName);</b>
<b class="nc">&nbsp;		Trigger trigger = this.scheduler.getTrigger(triggerKey);</b>
<b class="nc">&nbsp;		if (trigger == null) {</b>
<b class="nc">&nbsp;			return null;</b>
&nbsp;		}
<b class="nc">&nbsp;		TriggerState triggerState = this.scheduler.getTriggerState(triggerKey);</b>
<b class="nc">&nbsp;		TriggerDescriptor triggerDescriptor = TriggerDescriptor.of(trigger);</b>
<b class="nc">&nbsp;		Map&lt;String, Object&gt; jobDataMap = sanitizeJobDataMap(trigger.getJobDataMap(), showUnsanitized);</b>
<b class="nc">&nbsp;		return OperationResponseBody.of(triggerDescriptor.buildDetails(triggerState, jobDataMap));</b>
&nbsp;	}
&nbsp;
&nbsp;	private static Duration getIntervalDuration(long amount, IntervalUnit unit) {
<b class="nc">&nbsp;		return temporalUnit(unit).getDuration().multipliedBy(amount);</b>
&nbsp;	}
&nbsp;
&nbsp;	private static LocalTime getLocalTime(TimeOfDay timeOfDay) {
<b class="nc">&nbsp;		return (timeOfDay != null) ? LocalTime.of(timeOfDay.getHour(), timeOfDay.getMinute(), timeOfDay.getSecond())</b>
<b class="nc">&nbsp;				: null;</b>
&nbsp;	}
&nbsp;
&nbsp;	private Map&lt;String, Object&gt; sanitizeJobDataMap(JobDataMap dataMap, boolean showUnsanitized) {
<b class="nc">&nbsp;		if (dataMap != null) {</b>
<b class="nc">&nbsp;			Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;(dataMap.getWrappedMap());</b>
<b class="nc">&nbsp;			map.replaceAll((key, value) -&gt; getSanitizedValue(showUnsanitized, key, value));</b>
<b class="nc">&nbsp;			return map;</b>
&nbsp;		}
<b class="nc">&nbsp;		return null;</b>
&nbsp;	}
&nbsp;
&nbsp;	private Object getSanitizedValue(boolean showUnsanitized, String key, Object value) {
<b class="nc">&nbsp;		SanitizableData data = new SanitizableData(null, key, value);</b>
<b class="nc">&nbsp;		return this.sanitizer.sanitize(data, showUnsanitized);</b>
&nbsp;	}
&nbsp;
&nbsp;	private static TemporalUnit temporalUnit(IntervalUnit unit) {
<b class="nc">&nbsp;		return switch (unit) {</b>
<b class="nc">&nbsp;			case DAY -&gt; ChronoUnit.DAYS;</b>
<b class="nc">&nbsp;			case HOUR -&gt; ChronoUnit.HOURS;</b>
<b class="nc">&nbsp;			case MINUTE -&gt; ChronoUnit.MINUTES;</b>
<b class="nc">&nbsp;			case MONTH -&gt; ChronoUnit.MONTHS;</b>
<b class="nc">&nbsp;			case SECOND -&gt; ChronoUnit.SECONDS;</b>
<b class="nc">&nbsp;			case MILLISECOND -&gt; ChronoUnit.MILLIS;</b>
<b class="nc">&nbsp;			case WEEK -&gt; ChronoUnit.WEEKS;</b>
<b class="nc">&nbsp;			case YEAR -&gt; ChronoUnit.YEARS;</b>
&nbsp;		};
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Description of available job and trigger group names.
&nbsp;	 */
&nbsp;	public static final class QuartzDescriptor implements OperationResponseBody {
&nbsp;
&nbsp;		private final GroupNamesDescriptor jobs;
&nbsp;
&nbsp;		private final GroupNamesDescriptor triggers;
&nbsp;
<b class="nc">&nbsp;		QuartzDescriptor(GroupNamesDescriptor jobs, GroupNamesDescriptor triggers) {</b>
<b class="nc">&nbsp;			this.jobs = jobs;</b>
<b class="nc">&nbsp;			this.triggers = triggers;</b>
&nbsp;		}
&nbsp;
&nbsp;		public GroupNamesDescriptor getJobs() {
<b class="nc">&nbsp;			return this.jobs;</b>
&nbsp;		}
&nbsp;
&nbsp;		public GroupNamesDescriptor getTriggers() {
<b class="nc">&nbsp;			return this.triggers;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Description of group names.
&nbsp;	 */
&nbsp;	public static class GroupNamesDescriptor {
&nbsp;
&nbsp;		private final Set&lt;String&gt; groups;
&nbsp;
<b class="nc">&nbsp;		public GroupNamesDescriptor(List&lt;String&gt; groups) {</b>
<b class="nc">&nbsp;			this.groups = new LinkedHashSet&lt;&gt;(groups);</b>
&nbsp;		}
&nbsp;
&nbsp;		public Set&lt;String&gt; getGroups() {
<b class="nc">&nbsp;			return this.groups;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Description of each group identified by name.
&nbsp;	 */
&nbsp;	public static class QuartzGroupsDescriptor implements OperationResponseBody {
&nbsp;
&nbsp;		private final Map&lt;String, Object&gt; groups;
&nbsp;
<b class="nc">&nbsp;		public QuartzGroupsDescriptor(Map&lt;String, Object&gt; groups) {</b>
<b class="nc">&nbsp;			this.groups = groups;</b>
&nbsp;		}
&nbsp;
&nbsp;		public Map&lt;String, Object&gt; getGroups() {
<b class="nc">&nbsp;			return this.groups;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Description of the {@link JobDetail jobs} in a given group.
&nbsp;	 */
&nbsp;	public static final class QuartzJobGroupSummaryDescriptor implements OperationResponseBody {
&nbsp;
&nbsp;		private final String group;
&nbsp;
&nbsp;		private final Map&lt;String, QuartzJobSummaryDescriptor&gt; jobs;
&nbsp;
<b class="nc">&nbsp;		private QuartzJobGroupSummaryDescriptor(String group, Map&lt;String, QuartzJobSummaryDescriptor&gt; jobs) {</b>
<b class="nc">&nbsp;			this.group = group;</b>
<b class="nc">&nbsp;			this.jobs = jobs;</b>
&nbsp;		}
&nbsp;
&nbsp;		public String getGroup() {
<b class="nc">&nbsp;			return this.group;</b>
&nbsp;		}
&nbsp;
&nbsp;		public Map&lt;String, QuartzJobSummaryDescriptor&gt; getJobs() {
<b class="nc">&nbsp;			return this.jobs;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Description of a {@link Job Quartz Job}.
&nbsp;	 */
&nbsp;	public static final class QuartzJobSummaryDescriptor {
&nbsp;
&nbsp;		private final String className;
&nbsp;
<b class="nc">&nbsp;		private QuartzJobSummaryDescriptor(JobDetail job) {</b>
<b class="nc">&nbsp;			this.className = job.getJobClass().getName();</b>
&nbsp;		}
&nbsp;
&nbsp;		private static QuartzJobSummaryDescriptor of(JobDetail job) {
<b class="nc">&nbsp;			return new QuartzJobSummaryDescriptor(job);</b>
&nbsp;		}
&nbsp;
&nbsp;		public String getClassName() {
<b class="nc">&nbsp;			return this.className;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Description of a {@link Job Quartz Job}.
&nbsp;	 */
&nbsp;	public static final class QuartzJobDetailsDescriptor implements OperationResponseBody {
&nbsp;
&nbsp;		private final String group;
&nbsp;
&nbsp;		private final String name;
&nbsp;
&nbsp;		private final String description;
&nbsp;
&nbsp;		private final String className;
&nbsp;
&nbsp;		private final boolean durable;
&nbsp;
&nbsp;		private final boolean requestRecovery;
&nbsp;
&nbsp;		private final Map&lt;String, Object&gt; data;
&nbsp;
&nbsp;		private final List&lt;Map&lt;String, Object&gt;&gt; triggers;
&nbsp;
&nbsp;		QuartzJobDetailsDescriptor(String group, String name, String description, String className, boolean durable,
<b class="nc">&nbsp;				boolean requestRecovery, Map&lt;String, Object&gt; data, List&lt;Map&lt;String, Object&gt;&gt; triggers) {</b>
<b class="nc">&nbsp;			this.group = group;</b>
<b class="nc">&nbsp;			this.name = name;</b>
<b class="nc">&nbsp;			this.description = description;</b>
<b class="nc">&nbsp;			this.className = className;</b>
<b class="nc">&nbsp;			this.durable = durable;</b>
<b class="nc">&nbsp;			this.requestRecovery = requestRecovery;</b>
<b class="nc">&nbsp;			this.data = data;</b>
<b class="nc">&nbsp;			this.triggers = triggers;</b>
&nbsp;		}
&nbsp;
&nbsp;		public String getGroup() {
<b class="nc">&nbsp;			return this.group;</b>
&nbsp;		}
&nbsp;
&nbsp;		public String getName() {
<b class="nc">&nbsp;			return this.name;</b>
&nbsp;		}
&nbsp;
&nbsp;		public String getDescription() {
<b class="nc">&nbsp;			return this.description;</b>
&nbsp;		}
&nbsp;
&nbsp;		public String getClassName() {
<b class="nc">&nbsp;			return this.className;</b>
&nbsp;		}
&nbsp;
&nbsp;		public boolean isDurable() {
<b class="nc">&nbsp;			return this.durable;</b>
&nbsp;		}
&nbsp;
&nbsp;		public boolean isRequestRecovery() {
<b class="nc">&nbsp;			return this.requestRecovery;</b>
&nbsp;		}
&nbsp;
&nbsp;		public Map&lt;String, Object&gt; getData() {
<b class="nc">&nbsp;			return this.data;</b>
&nbsp;		}
&nbsp;
&nbsp;		public List&lt;Map&lt;String, Object&gt;&gt; getTriggers() {
<b class="nc">&nbsp;			return this.triggers;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Description of the {@link Trigger triggers} in a given group.
&nbsp;	 */
&nbsp;	public static final class QuartzTriggerGroupSummaryDescriptor implements OperationResponseBody {
&nbsp;
&nbsp;		private final String group;
&nbsp;
&nbsp;		private final boolean paused;
&nbsp;
&nbsp;		private final Triggers triggers;
&nbsp;
&nbsp;		private QuartzTriggerGroupSummaryDescriptor(String group, boolean paused,
<b class="nc">&nbsp;				Map&lt;TriggerType, Map&lt;String, Object&gt;&gt; descriptionsByType) {</b>
<b class="nc">&nbsp;			this.group = group;</b>
<b class="nc">&nbsp;			this.paused = paused;</b>
<b class="nc">&nbsp;			this.triggers = new Triggers(descriptionsByType);</b>
&nbsp;
&nbsp;		}
&nbsp;
&nbsp;		public String getGroup() {
<b class="nc">&nbsp;			return this.group;</b>
&nbsp;		}
&nbsp;
&nbsp;		public boolean isPaused() {
<b class="nc">&nbsp;			return this.paused;</b>
&nbsp;		}
&nbsp;
&nbsp;		public Triggers getTriggers() {
<b class="nc">&nbsp;			return this.triggers;</b>
&nbsp;		}
&nbsp;
&nbsp;		public static final class Triggers {
&nbsp;
&nbsp;			private final Map&lt;String, Object&gt; cron;
&nbsp;
&nbsp;			private final Map&lt;String, Object&gt; simple;
&nbsp;
&nbsp;			private final Map&lt;String, Object&gt; dailyTimeInterval;
&nbsp;
&nbsp;			private final Map&lt;String, Object&gt; calendarInterval;
&nbsp;
&nbsp;			private final Map&lt;String, Object&gt; custom;
&nbsp;
<b class="nc">&nbsp;			private Triggers(Map&lt;TriggerType, Map&lt;String, Object&gt;&gt; descriptionsByType) {</b>
<b class="nc">&nbsp;				this.cron = descriptionsByType.getOrDefault(TriggerType.CRON, Collections.emptyMap());</b>
<b class="nc">&nbsp;				this.dailyTimeInterval = descriptionsByType.getOrDefault(TriggerType.DAILY_INTERVAL,</b>
<b class="nc">&nbsp;						Collections.emptyMap());</b>
<b class="nc">&nbsp;				this.calendarInterval = descriptionsByType.getOrDefault(TriggerType.CALENDAR_INTERVAL,</b>
<b class="nc">&nbsp;						Collections.emptyMap());</b>
<b class="nc">&nbsp;				this.simple = descriptionsByType.getOrDefault(TriggerType.SIMPLE, Collections.emptyMap());</b>
<b class="nc">&nbsp;				this.custom = descriptionsByType.getOrDefault(TriggerType.CUSTOM_TRIGGER, Collections.emptyMap());</b>
&nbsp;			}
&nbsp;
&nbsp;			public Map&lt;String, Object&gt; getCron() {
<b class="nc">&nbsp;				return this.cron;</b>
&nbsp;			}
&nbsp;
&nbsp;			public Map&lt;String, Object&gt; getSimple() {
<b class="nc">&nbsp;				return this.simple;</b>
&nbsp;			}
&nbsp;
&nbsp;			public Map&lt;String, Object&gt; getDailyTimeInterval() {
<b class="nc">&nbsp;				return this.dailyTimeInterval;</b>
&nbsp;			}
&nbsp;
&nbsp;			public Map&lt;String, Object&gt; getCalendarInterval() {
<b class="nc">&nbsp;				return this.calendarInterval;</b>
&nbsp;			}
&nbsp;
&nbsp;			public Map&lt;String, Object&gt; getCustom() {
<b class="nc">&nbsp;				return this.custom;</b>
&nbsp;			}
&nbsp;
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
<b class="nc">&nbsp;	private enum TriggerType {</b>
&nbsp;
<b class="nc">&nbsp;		CRON(&quot;cron&quot;),</b>
&nbsp;
<b class="nc">&nbsp;		CUSTOM_TRIGGER(&quot;custom&quot;),</b>
&nbsp;
<b class="nc">&nbsp;		CALENDAR_INTERVAL(&quot;calendarInterval&quot;),</b>
&nbsp;
<b class="nc">&nbsp;		DAILY_INTERVAL(&quot;dailyTimeInterval&quot;),</b>
&nbsp;
<b class="nc">&nbsp;		SIMPLE(&quot;simple&quot;);</b>
&nbsp;
&nbsp;		private final String id;
&nbsp;
<b class="nc">&nbsp;		TriggerType(String id) {</b>
<b class="nc">&nbsp;			this.id = id;</b>
&nbsp;		}
&nbsp;
&nbsp;		public String getId() {
<b class="nc">&nbsp;			return this.id;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Base class for descriptions of a {@link Trigger}.
&nbsp;	 */
&nbsp;	public abstract static class TriggerDescriptor {
&nbsp;
<b class="nc">&nbsp;		private static final Map&lt;Class&lt;? extends Trigger&gt;, Function&lt;Trigger, TriggerDescriptor&gt;&gt; DESCRIBERS = new LinkedHashMap&lt;&gt;();</b>
&nbsp;
&nbsp;		static {
<b class="nc">&nbsp;			DESCRIBERS.put(CronTrigger.class, (trigger) -&gt; new CronTriggerDescriptor((CronTrigger) trigger));</b>
<b class="nc">&nbsp;			DESCRIBERS.put(SimpleTrigger.class, (trigger) -&gt; new SimpleTriggerDescriptor((SimpleTrigger) trigger));</b>
<b class="nc">&nbsp;			DESCRIBERS.put(DailyTimeIntervalTrigger.class,</b>
<b class="nc">&nbsp;					(trigger) -&gt; new DailyTimeIntervalTriggerDescriptor((DailyTimeIntervalTrigger) trigger));</b>
<b class="nc">&nbsp;			DESCRIBERS.put(CalendarIntervalTrigger.class,</b>
<b class="nc">&nbsp;					(trigger) -&gt; new CalendarIntervalTriggerDescriptor((CalendarIntervalTrigger) trigger));</b>
&nbsp;		}
&nbsp;
&nbsp;		private final Trigger trigger;
&nbsp;
&nbsp;		private final TriggerType type;
&nbsp;
&nbsp;		private static TriggerDescriptor of(Trigger trigger) {
<b class="nc">&nbsp;			return DESCRIBERS.entrySet()</b>
<b class="nc">&nbsp;				.stream()</b>
<b class="nc">&nbsp;				.filter((entry) -&gt; entry.getKey().isInstance(trigger))</b>
<b class="nc">&nbsp;				.map((entry) -&gt; entry.getValue().apply(trigger))</b>
<b class="nc">&nbsp;				.findFirst()</b>
<b class="nc">&nbsp;				.orElse(new CustomTriggerDescriptor(trigger));</b>
&nbsp;		}
&nbsp;
<b class="nc">&nbsp;		protected TriggerDescriptor(Trigger trigger, TriggerType type) {</b>
<b class="nc">&nbsp;			this.trigger = trigger;</b>
<b class="nc">&nbsp;			this.type = type;</b>
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Build the summary of the trigger.
&nbsp;		 * @param addTriggerSpecificSummary whether to add trigger-implementation specific
&nbsp;		 * summary.
&nbsp;		 * @return basic properties of the trigger
&nbsp;		 */
&nbsp;		public Map&lt;String, Object&gt; buildSummary(boolean addTriggerSpecificSummary) {
<b class="nc">&nbsp;			Map&lt;String, Object&gt; summary = new LinkedHashMap&lt;&gt;();</b>
<b class="nc">&nbsp;			putIfNoNull(summary, &quot;previousFireTime&quot;, this.trigger.getPreviousFireTime());</b>
<b class="nc">&nbsp;			putIfNoNull(summary, &quot;nextFireTime&quot;, this.trigger.getNextFireTime());</b>
<b class="nc">&nbsp;			summary.put(&quot;priority&quot;, this.trigger.getPriority());</b>
<b class="nc">&nbsp;			if (addTriggerSpecificSummary) {</b>
<b class="nc">&nbsp;				appendSummary(summary);</b>
&nbsp;			}
<b class="nc">&nbsp;			return summary;</b>
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Append trigger-implementation specific summary items to the specified
&nbsp;		 * {@code content}.
&nbsp;		 * @param content the summary of the trigger
&nbsp;		 */
&nbsp;		protected abstract void appendSummary(Map&lt;String, Object&gt; content);
&nbsp;
&nbsp;		/**
&nbsp;		 * Build the full details of the trigger.
&nbsp;		 * @param triggerState the current state of the trigger
&nbsp;		 * @param sanitizedDataMap a sanitized data map or {@code null}
&nbsp;		 * @return all properties of the trigger
&nbsp;		 */
&nbsp;		public Map&lt;String, Object&gt; buildDetails(TriggerState triggerState, Map&lt;String, Object&gt; sanitizedDataMap) {
<b class="nc">&nbsp;			Map&lt;String, Object&gt; details = new LinkedHashMap&lt;&gt;();</b>
<b class="nc">&nbsp;			details.put(&quot;group&quot;, this.trigger.getKey().getGroup());</b>
<b class="nc">&nbsp;			details.put(&quot;name&quot;, this.trigger.getKey().getName());</b>
<b class="nc">&nbsp;			putIfNoNull(details, &quot;description&quot;, this.trigger.getDescription());</b>
<b class="nc">&nbsp;			details.put(&quot;state&quot;, triggerState);</b>
<b class="nc">&nbsp;			details.put(&quot;type&quot;, getType().getId());</b>
<b class="nc">&nbsp;			putIfNoNull(details, &quot;calendarName&quot;, this.trigger.getCalendarName());</b>
<b class="nc">&nbsp;			putIfNoNull(details, &quot;startTime&quot;, this.trigger.getStartTime());</b>
<b class="nc">&nbsp;			putIfNoNull(details, &quot;endTime&quot;, this.trigger.getEndTime());</b>
<b class="nc">&nbsp;			putIfNoNull(details, &quot;previousFireTime&quot;, this.trigger.getPreviousFireTime());</b>
<b class="nc">&nbsp;			putIfNoNull(details, &quot;nextFireTime&quot;, this.trigger.getNextFireTime());</b>
<b class="nc">&nbsp;			putIfNoNull(details, &quot;priority&quot;, this.trigger.getPriority());</b>
<b class="nc">&nbsp;			putIfNoNull(details, &quot;finalFireTime&quot;, this.trigger.getFinalFireTime());</b>
<b class="nc">&nbsp;			putIfNoNull(details, &quot;data&quot;, sanitizedDataMap);</b>
<b class="nc">&nbsp;			Map&lt;String, Object&gt; typeDetails = new LinkedHashMap&lt;&gt;();</b>
<b class="nc">&nbsp;			appendDetails(typeDetails);</b>
<b class="nc">&nbsp;			details.put(getType().getId(), typeDetails);</b>
<b class="nc">&nbsp;			return details;</b>
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Append trigger-implementation specific details to the specified
&nbsp;		 * {@code content}.
&nbsp;		 * @param content the details of the trigger
&nbsp;		 */
&nbsp;		protected abstract void appendDetails(Map&lt;String, Object&gt; content);
&nbsp;
&nbsp;		protected void putIfNoNull(Map&lt;String, Object&gt; content, String key, Object value) {
<b class="nc">&nbsp;			if (value != null) {</b>
<b class="nc">&nbsp;				content.put(key, value);</b>
&nbsp;			}
&nbsp;		}
&nbsp;
&nbsp;		protected Trigger getTrigger() {
<b class="nc">&nbsp;			return this.trigger;</b>
&nbsp;		}
&nbsp;
&nbsp;		protected TriggerType getType() {
<b class="nc">&nbsp;			return this.type;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Description of a {@link CronTrigger}.
&nbsp;	 */
&nbsp;	public static final class CronTriggerDescriptor extends TriggerDescriptor {
&nbsp;
&nbsp;		private final CronTrigger trigger;
&nbsp;
&nbsp;		public CronTriggerDescriptor(CronTrigger trigger) {
<b class="nc">&nbsp;			super(trigger, TriggerType.CRON);</b>
<b class="nc">&nbsp;			this.trigger = trigger;</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		protected void appendSummary(Map&lt;String, Object&gt; content) {
<b class="nc">&nbsp;			content.put(&quot;expression&quot;, this.trigger.getCronExpression());</b>
<b class="nc">&nbsp;			putIfNoNull(content, &quot;timeZone&quot;, this.trigger.getTimeZone());</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		protected void appendDetails(Map&lt;String, Object&gt; content) {
<b class="nc">&nbsp;			appendSummary(content);</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Description of a {@link SimpleTrigger}.
&nbsp;	 */
&nbsp;	public static final class SimpleTriggerDescriptor extends TriggerDescriptor {
&nbsp;
&nbsp;		private final SimpleTrigger trigger;
&nbsp;
&nbsp;		public SimpleTriggerDescriptor(SimpleTrigger trigger) {
<b class="nc">&nbsp;			super(trigger, TriggerType.SIMPLE);</b>
<b class="nc">&nbsp;			this.trigger = trigger;</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		protected void appendSummary(Map&lt;String, Object&gt; content) {
<b class="nc">&nbsp;			content.put(&quot;interval&quot;, this.trigger.getRepeatInterval());</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		protected void appendDetails(Map&lt;String, Object&gt; content) {
<b class="nc">&nbsp;			appendSummary(content);</b>
<b class="nc">&nbsp;			content.put(&quot;repeatCount&quot;, this.trigger.getRepeatCount());</b>
<b class="nc">&nbsp;			content.put(&quot;timesTriggered&quot;, this.trigger.getTimesTriggered());</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Description of a {@link DailyTimeIntervalTrigger}.
&nbsp;	 */
&nbsp;	public static final class DailyTimeIntervalTriggerDescriptor extends TriggerDescriptor {
&nbsp;
&nbsp;		private final DailyTimeIntervalTrigger trigger;
&nbsp;
&nbsp;		public DailyTimeIntervalTriggerDescriptor(DailyTimeIntervalTrigger trigger) {
<b class="nc">&nbsp;			super(trigger, TriggerType.DAILY_INTERVAL);</b>
<b class="nc">&nbsp;			this.trigger = trigger;</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		protected void appendSummary(Map&lt;String, Object&gt; content) {
<b class="nc">&nbsp;			content.put(&quot;interval&quot;,</b>
<b class="nc">&nbsp;					getIntervalDuration(this.trigger.getRepeatInterval(), this.trigger.getRepeatIntervalUnit())</b>
<b class="nc">&nbsp;						.toMillis());</b>
<b class="nc">&nbsp;			putIfNoNull(content, &quot;daysOfWeek&quot;, this.trigger.getDaysOfWeek());</b>
<b class="nc">&nbsp;			putIfNoNull(content, &quot;startTimeOfDay&quot;, getLocalTime(this.trigger.getStartTimeOfDay()));</b>
<b class="nc">&nbsp;			putIfNoNull(content, &quot;endTimeOfDay&quot;, getLocalTime(this.trigger.getEndTimeOfDay()));</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		protected void appendDetails(Map&lt;String, Object&gt; content) {
<b class="nc">&nbsp;			appendSummary(content);</b>
<b class="nc">&nbsp;			content.put(&quot;repeatCount&quot;, this.trigger.getRepeatCount());</b>
<b class="nc">&nbsp;			content.put(&quot;timesTriggered&quot;, this.trigger.getTimesTriggered());</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Description of a {@link CalendarIntervalTrigger}.
&nbsp;	 */
&nbsp;	public static final class CalendarIntervalTriggerDescriptor extends TriggerDescriptor {
&nbsp;
&nbsp;		private final CalendarIntervalTrigger trigger;
&nbsp;
&nbsp;		public CalendarIntervalTriggerDescriptor(CalendarIntervalTrigger trigger) {
<b class="nc">&nbsp;			super(trigger, TriggerType.CALENDAR_INTERVAL);</b>
<b class="nc">&nbsp;			this.trigger = trigger;</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		protected void appendSummary(Map&lt;String, Object&gt; content) {
<b class="nc">&nbsp;			content.put(&quot;interval&quot;,</b>
<b class="nc">&nbsp;					getIntervalDuration(this.trigger.getRepeatInterval(), this.trigger.getRepeatIntervalUnit())</b>
<b class="nc">&nbsp;						.toMillis());</b>
<b class="nc">&nbsp;			putIfNoNull(content, &quot;timeZone&quot;, this.trigger.getTimeZone());</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		protected void appendDetails(Map&lt;String, Object&gt; content) {
<b class="nc">&nbsp;			appendSummary(content);</b>
<b class="nc">&nbsp;			content.put(&quot;timesTriggered&quot;, this.trigger.getTimesTriggered());</b>
<b class="nc">&nbsp;			content.put(&quot;preserveHourOfDayAcrossDaylightSavings&quot;,</b>
<b class="nc">&nbsp;					this.trigger.isPreserveHourOfDayAcrossDaylightSavings());</b>
<b class="nc">&nbsp;			content.put(&quot;skipDayIfHourDoesNotExist&quot;, this.trigger.isSkipDayIfHourDoesNotExist());</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Description of a custom {@link Trigger}.
&nbsp;	 */
&nbsp;	public static final class CustomTriggerDescriptor extends TriggerDescriptor {
&nbsp;
&nbsp;		public CustomTriggerDescriptor(Trigger trigger) {
<b class="nc">&nbsp;			super(trigger, TriggerType.CUSTOM_TRIGGER);</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		protected void appendSummary(Map&lt;String, Object&gt; content) {
<b class="nc">&nbsp;			content.put(&quot;trigger&quot;, getTrigger().toString());</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		protected void appendDetails(Map&lt;String, Object&gt; content) {
<b class="nc">&nbsp;			appendSummary(content);</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-04-01 11:12</div>
</div>
</body>
</html>
