


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > HttpExchange</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.springframework.boot.actuate.web.exchanges</a>
</div>

<h1>Coverage Summary for Class: HttpExchange (org.springframework.boot.actuate.web.exchanges)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">HttpExchange</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/9)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/15)
  </span>
</td>
</tr>
  <tr>
    <td class="name">HttpExchange$HeadersFilter</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/13)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">HttpExchange$Principal</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">HttpExchange$Request</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/18)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">HttpExchange$Response</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/11)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">HttpExchange$Session</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">HttpExchange$Started</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/15)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/38)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/82)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp; * Copyright 2012-2022 the original author or authors.
&nbsp; *
&nbsp; * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
&nbsp; * you may not use this file except in compliance with the License.
&nbsp; * You may obtain a copy of the License at
&nbsp; *
&nbsp; *      https://www.apache.org/licenses/LICENSE-2.0
&nbsp; *
&nbsp; * Unless required by applicable law or agreed to in writing, software
&nbsp; * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
&nbsp; * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
&nbsp; * See the License for the specific language governing permissions and
&nbsp; * limitations under the License.
&nbsp; */
&nbsp;
&nbsp;package org.springframework.boot.actuate.web.exchanges;
&nbsp;
&nbsp;import java.net.URI;
&nbsp;import java.time.Clock;
&nbsp;import java.time.Duration;
&nbsp;import java.time.Instant;
&nbsp;import java.util.Arrays;
&nbsp;import java.util.Collections;
&nbsp;import java.util.HashSet;
&nbsp;import java.util.LinkedHashMap;
&nbsp;import java.util.List;
&nbsp;import java.util.Map;
&nbsp;import java.util.Set;
&nbsp;import java.util.function.Supplier;
&nbsp;
&nbsp;import org.springframework.http.HttpHeaders;
&nbsp;
&nbsp;/**
&nbsp; * An HTTP request and response exchange. Can be used for analyzing contextual information
&nbsp; * such as HTTP headers. Data from this class will be exposed by the
&nbsp; * {@link HttpExchangesEndpoint}, usually as JSON.
&nbsp; *
&nbsp; * @author Dave Syer
&nbsp; * @author Andy Wilkinson
&nbsp; * @author Phillip Webb
&nbsp; * @since 3.0.0
&nbsp; */
&nbsp;public final class HttpExchange {
&nbsp;
&nbsp;	private final Instant timestamp;
&nbsp;
&nbsp;	private final Request request;
&nbsp;
&nbsp;	private final Response response;
&nbsp;
&nbsp;	private final Principal principal;
&nbsp;
&nbsp;	private final Session session;
&nbsp;
&nbsp;	private final Duration timeTaken;
&nbsp;
&nbsp;	/**
&nbsp;	 * Primarily for use by {@link HttpExchangeRepository} implementations when recreating
&nbsp;	 * an exchange from a persistent store.
&nbsp;	 * @param timestamp the instant that the exchange started
&nbsp;	 * @param request the request
&nbsp;	 * @param response the response
&nbsp;	 * @param principal the principal
&nbsp;	 * @param session the session
&nbsp;	 * @param timeTaken the total time taken
&nbsp;	 */
&nbsp;	public HttpExchange(Instant timestamp, Request request, Response response, Principal principal, Session session,
<b class="nc">&nbsp;			Duration timeTaken) {</b>
<b class="nc">&nbsp;		this.timestamp = timestamp;</b>
<b class="nc">&nbsp;		this.request = request;</b>
<b class="nc">&nbsp;		this.response = response;</b>
<b class="nc">&nbsp;		this.principal = principal;</b>
<b class="nc">&nbsp;		this.session = session;</b>
<b class="nc">&nbsp;		this.timeTaken = timeTaken;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Returns the instant that the exchange started.
&nbsp;	 * @return the start timestamp
&nbsp;	 */
&nbsp;	public Instant getTimestamp() {
<b class="nc">&nbsp;		return this.timestamp;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Returns the request that started the exchange.
&nbsp;	 * @return the request.
&nbsp;	 */
&nbsp;	public Request getRequest() {
<b class="nc">&nbsp;		return this.request;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Returns the response that completed the exchange.
&nbsp;	 * @return the response.
&nbsp;	 */
&nbsp;	public Response getResponse() {
<b class="nc">&nbsp;		return this.response;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Returns the principal.
&nbsp;	 * @return the request
&nbsp;	 */
&nbsp;	public Principal getPrincipal() {
<b class="nc">&nbsp;		return this.principal;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Returns the session details.
&nbsp;	 * @return the session
&nbsp;	 */
&nbsp;	public Session getSession() {
<b class="nc">&nbsp;		return this.session;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Returns the total time taken for the exchange.
&nbsp;	 * @return the total time taken
&nbsp;	 */
&nbsp;	public Duration getTimeTaken() {
<b class="nc">&nbsp;		return this.timeTaken;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Start a new {@link Started} from the given source request.
&nbsp;	 * @param request the recordable HTTP request
&nbsp;	 * @return an in-progress request
&nbsp;	 */
&nbsp;	public static Started start(RecordableHttpRequest request) {
<b class="nc">&nbsp;		return start(Clock.systemUTC(), request);</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Start a new {@link Started} from the given source request.
&nbsp;	 * @param clock the clock to use
&nbsp;	 * @param request the recordable HTTP request
&nbsp;	 * @return an in-progress request
&nbsp;	 */
&nbsp;	public static Started start(Clock clock, RecordableHttpRequest request) {
<b class="nc">&nbsp;		return new Started(clock, request);</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * A started request that when {@link #finish finished} will return a new
&nbsp;	 * {@link HttpExchange} instance.
&nbsp;	 */
&nbsp;	public static final class Started {
&nbsp;
&nbsp;		private final Instant timestamp;
&nbsp;
&nbsp;		private final RecordableHttpRequest request;
&nbsp;
<b class="nc">&nbsp;		private Started(Clock clock, RecordableHttpRequest request) {</b>
<b class="nc">&nbsp;			this.timestamp = Instant.now(clock);</b>
<b class="nc">&nbsp;			this.request = request;</b>
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Finish the request and return a new {@link HttpExchange} instance.
&nbsp;		 * @param response the recordable HTTP response
&nbsp;		 * @param principalSupplier a supplier to provide the principal
&nbsp;		 * @param sessionIdSupplier a supplier to provide the session ID
&nbsp;		 * @param includes the options to include
&nbsp;		 * @return a new {@link HttpExchange} instance
&nbsp;		 */
&nbsp;		public HttpExchange finish(RecordableHttpResponse response, Supplier&lt;java.security.Principal&gt; principalSupplier,
&nbsp;				Supplier&lt;String&gt; sessionIdSupplier, Include... includes) {
<b class="nc">&nbsp;			return finish(Clock.systemUTC(), response, principalSupplier, sessionIdSupplier, includes);</b>
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Finish the request and return a new {@link HttpExchange} instance.
&nbsp;		 * @param clock the clock to use
&nbsp;		 * @param response the recordable HTTP response
&nbsp;		 * @param principalSupplier a supplier to provide the principal
&nbsp;		 * @param sessionIdSupplier a supplier to provide the session ID
&nbsp;		 * @param includes the options to include
&nbsp;		 * @return a new {@link HttpExchange} instance
&nbsp;		 */
&nbsp;		public HttpExchange finish(Clock clock, RecordableHttpResponse response,
&nbsp;				Supplier&lt;java.security.Principal&gt; principalSupplier, Supplier&lt;String&gt; sessionIdSupplier,
&nbsp;				Include... includes) {
<b class="nc">&nbsp;			return finish(clock, response, principalSupplier, sessionIdSupplier,</b>
<b class="nc">&nbsp;					new HashSet&lt;&gt;(Arrays.asList(includes)));</b>
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Finish the request and return a new {@link HttpExchange} instance.
&nbsp;		 * @param response the recordable HTTP response
&nbsp;		 * @param principalSupplier a supplier to provide the principal
&nbsp;		 * @param sessionIdSupplier a supplier to provide the session ID
&nbsp;		 * @param includes the options to include
&nbsp;		 * @return a new {@link HttpExchange} instance
&nbsp;		 */
&nbsp;		public HttpExchange finish(RecordableHttpResponse response, Supplier&lt;java.security.Principal&gt; principalSupplier,
&nbsp;				Supplier&lt;String&gt; sessionIdSupplier, Set&lt;Include&gt; includes) {
<b class="nc">&nbsp;			return finish(Clock.systemUTC(), response, principalSupplier, sessionIdSupplier, includes);</b>
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Finish the request and return a new {@link HttpExchange} instance.
&nbsp;		 * @param clock the clock to use
&nbsp;		 * @param response the recordable HTTP response
&nbsp;		 * @param principalSupplier a supplier to provide the principal
&nbsp;		 * @param sessionIdSupplier a supplier to provide the session ID
&nbsp;		 * @param includes the options to include
&nbsp;		 * @return a new {@link HttpExchange} instance
&nbsp;		 */
&nbsp;		public HttpExchange finish(Clock clock, RecordableHttpResponse response,
&nbsp;				Supplier&lt;java.security.Principal&gt; principalSupplier, Supplier&lt;String&gt; sessionIdSupplier,
&nbsp;				Set&lt;Include&gt; includes) {
<b class="nc">&nbsp;			Request exchangeRequest = new Request(this.request, includes);</b>
<b class="nc">&nbsp;			Response exchangeResponse = new Response(response, includes);</b>
<b class="nc">&nbsp;			Principal principal = getIfIncluded(includes, Include.PRINCIPAL, () -&gt; Principal.from(principalSupplier));</b>
<b class="nc">&nbsp;			Session session = getIfIncluded(includes, Include.SESSION_ID, () -&gt; Session.from(sessionIdSupplier));</b>
<b class="nc">&nbsp;			Duration duration = getIfIncluded(includes, Include.TIME_TAKEN,</b>
<b class="nc">&nbsp;					() -&gt; Duration.between(this.timestamp, Instant.now(clock)));</b>
<b class="nc">&nbsp;			return new HttpExchange(this.timestamp, exchangeRequest, exchangeResponse, principal, session, duration);</b>
&nbsp;		}
&nbsp;
&nbsp;		private &lt;T&gt; T getIfIncluded(Set&lt;Include&gt; includes, Include include, Supplier&lt;T&gt; supplier) {
<b class="nc">&nbsp;			return (includes.contains(include)) ? supplier.get() : null;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * The request that started the exchange.
&nbsp;	 */
&nbsp;	public static final class Request {
&nbsp;
&nbsp;		private final URI uri;
&nbsp;
&nbsp;		private final String remoteAddress;
&nbsp;
&nbsp;		private final String method;
&nbsp;
&nbsp;		private final Map&lt;String, List&lt;String&gt;&gt; headers;
&nbsp;
<b class="nc">&nbsp;		private Request(RecordableHttpRequest request, Set&lt;Include&gt; includes) {</b>
<b class="nc">&nbsp;			this.uri = request.getUri();</b>
<b class="nc">&nbsp;			this.remoteAddress = (includes.contains(Include.REMOTE_ADDRESS)) ? request.getRemoteAddress() : null;</b>
<b class="nc">&nbsp;			this.method = request.getMethod();</b>
<b class="nc">&nbsp;			this.headers = Collections.unmodifiableMap(filterHeaders(request.getHeaders(), includes));</b>
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Creates a fully-configured {@code Request} instance. Primarily for use by
&nbsp;		 * {@link HttpExchangeRepository} implementations when recreating a request from a
&nbsp;		 * persistent store.
&nbsp;		 * @param uri the URI of the request
&nbsp;		 * @param remoteAddress remote address from which the request was sent, if known
&nbsp;		 * @param method the HTTP method of the request
&nbsp;		 * @param headers the request headers
&nbsp;		 */
<b class="nc">&nbsp;		public Request(URI uri, String remoteAddress, String method, Map&lt;String, List&lt;String&gt;&gt; headers) {</b>
<b class="nc">&nbsp;			this.uri = uri;</b>
<b class="nc">&nbsp;			this.remoteAddress = remoteAddress;</b>
<b class="nc">&nbsp;			this.method = method;</b>
<b class="nc">&nbsp;			this.headers = Collections.unmodifiableMap(new LinkedHashMap&lt;&gt;(headers));</b>
&nbsp;		}
&nbsp;
&nbsp;		private Map&lt;String, List&lt;String&gt;&gt; filterHeaders(Map&lt;String, List&lt;String&gt;&gt; headers, Set&lt;Include&gt; includes) {
<b class="nc">&nbsp;			HeadersFilter filter = new HeadersFilter(includes, Include.REQUEST_HEADERS);</b>
<b class="nc">&nbsp;			filter.excludeUnless(HttpHeaders.COOKIE, Include.COOKIE_HEADERS);</b>
<b class="nc">&nbsp;			filter.excludeUnless(HttpHeaders.AUTHORIZATION, Include.AUTHORIZATION_HEADER);</b>
<b class="nc">&nbsp;			return filter.apply(headers);</b>
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Return the HTTP method requested.
&nbsp;		 * @return the HTTP method
&nbsp;		 */
&nbsp;		public String getMethod() {
<b class="nc">&nbsp;			return this.method;</b>
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Return the URI requested.
&nbsp;		 * @return the URI
&nbsp;		 */
&nbsp;		public URI getUri() {
<b class="nc">&nbsp;			return this.uri;</b>
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Return the request headers.
&nbsp;		 * @return the request headers
&nbsp;		 */
&nbsp;		public Map&lt;String, List&lt;String&gt;&gt; getHeaders() {
<b class="nc">&nbsp;			return this.headers;</b>
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Return the remote address that made the request.
&nbsp;		 * @return the remote address
&nbsp;		 */
&nbsp;		public String getRemoteAddress() {
<b class="nc">&nbsp;			return this.remoteAddress;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * The response that finished the exchange.
&nbsp;	 */
&nbsp;	public static final class Response {
&nbsp;
&nbsp;		private final int status;
&nbsp;
&nbsp;		private final Map&lt;String, List&lt;String&gt;&gt; headers;
&nbsp;
<b class="nc">&nbsp;		private Response(RecordableHttpResponse request, Set&lt;Include&gt; includes) {</b>
<b class="nc">&nbsp;			this.status = request.getStatus();</b>
<b class="nc">&nbsp;			this.headers = Collections.unmodifiableMap(filterHeaders(request.getHeaders(), includes));</b>
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Creates a fully-configured {@code Response} instance. Primarily for use by
&nbsp;		 * {@link HttpExchangeRepository} implementations when recreating a response from
&nbsp;		 * a persistent store.
&nbsp;		 * @param status the status of the response
&nbsp;		 * @param headers the response headers
&nbsp;		 */
<b class="nc">&nbsp;		public Response(int status, Map&lt;String, List&lt;String&gt;&gt; headers) {</b>
<b class="nc">&nbsp;			this.status = status;</b>
<b class="nc">&nbsp;			this.headers = Collections.unmodifiableMap(new LinkedHashMap&lt;&gt;(headers));</b>
&nbsp;		}
&nbsp;
&nbsp;		private Map&lt;String, List&lt;String&gt;&gt; filterHeaders(Map&lt;String, List&lt;String&gt;&gt; headers, Set&lt;Include&gt; includes) {
<b class="nc">&nbsp;			HeadersFilter filter = new HeadersFilter(includes, Include.RESPONSE_HEADERS);</b>
<b class="nc">&nbsp;			filter.excludeUnless(HttpHeaders.SET_COOKIE, Include.COOKIE_HEADERS);</b>
<b class="nc">&nbsp;			return filter.apply(headers);</b>
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Return the status code of the response.
&nbsp;		 * @return the response status code
&nbsp;		 */
&nbsp;		public int getStatus() {
<b class="nc">&nbsp;			return this.status;</b>
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Return the response headers.
&nbsp;		 * @return the headers
&nbsp;		 */
&nbsp;		public Map&lt;String, List&lt;String&gt;&gt; getHeaders() {
<b class="nc">&nbsp;			return this.headers;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * The session associated with the exchange.
&nbsp;	 */
&nbsp;	public static final class Session {
&nbsp;
&nbsp;		private final String id;
&nbsp;
&nbsp;		/**
&nbsp;		 * Creates a {@code Session}. Primarily for use by {@link HttpExchangeRepository}
&nbsp;		 * implementations when recreating a session from a persistent store.
&nbsp;		 * @param id the session id
&nbsp;		 */
<b class="nc">&nbsp;		public Session(String id) {</b>
<b class="nc">&nbsp;			this.id = id;</b>
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Return the ID of the session.
&nbsp;		 * @return the session ID
&nbsp;		 */
&nbsp;		public String getId() {
<b class="nc">&nbsp;			return this.id;</b>
&nbsp;		}
&nbsp;
&nbsp;		static Session from(Supplier&lt;String&gt; sessionIdSupplier) {
<b class="nc">&nbsp;			String id = sessionIdSupplier.get();</b>
<b class="nc">&nbsp;			return (id != null) ? new Session(id) : null;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Principal associated with an HTTP request-response exchange.
&nbsp;	 */
&nbsp;	public static final class Principal {
&nbsp;
&nbsp;		private final String name;
&nbsp;
&nbsp;		/**
&nbsp;		 * Creates a {@code Principal}. Primarily for use by {@link Principal}
&nbsp;		 * implementations when recreating a response from a persistent store.
&nbsp;		 * @param name the name of the principal
&nbsp;		 */
<b class="nc">&nbsp;		public Principal(String name) {</b>
<b class="nc">&nbsp;			this.name = name;</b>
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Return the name of the principal.
&nbsp;		 * @return the principal name
&nbsp;		 */
&nbsp;		public String getName() {
<b class="nc">&nbsp;			return this.name;</b>
&nbsp;		}
&nbsp;
&nbsp;		static Principal from(Supplier&lt;java.security.Principal&gt; principalSupplier) {
<b class="nc">&nbsp;			java.security.Principal principal = principalSupplier.get();</b>
<b class="nc">&nbsp;			return (principal != null) ? new Principal(principal.getName()) : null;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Utility class used to filter headers.
&nbsp;	 */
&nbsp;	private static class HeadersFilter {
&nbsp;
&nbsp;		private final Set&lt;Include&gt; includes;
&nbsp;
&nbsp;		private final Include requiredInclude;
&nbsp;
&nbsp;		private final Set&lt;String&gt; filteredHeaderNames;
&nbsp;
<b class="nc">&nbsp;		HeadersFilter(Set&lt;Include&gt; includes, Include requiredInclude) {</b>
<b class="nc">&nbsp;			this.includes = includes;</b>
<b class="nc">&nbsp;			this.requiredInclude = requiredInclude;</b>
<b class="nc">&nbsp;			this.filteredHeaderNames = new HashSet&lt;&gt;();</b>
&nbsp;		}
&nbsp;
&nbsp;		void excludeUnless(String header, Include exception) {
<b class="nc">&nbsp;			if (!this.includes.contains(exception)) {</b>
<b class="nc">&nbsp;				this.filteredHeaderNames.add(header.toLowerCase());</b>
&nbsp;			}
&nbsp;		}
&nbsp;
&nbsp;		Map&lt;String, List&lt;String&gt;&gt; apply(Map&lt;String, List&lt;String&gt;&gt; headers) {
<b class="nc">&nbsp;			if (!this.includes.contains(this.requiredInclude)) {</b>
<b class="nc">&nbsp;				return Collections.emptyMap();</b>
&nbsp;			}
<b class="nc">&nbsp;			Map&lt;String, List&lt;String&gt;&gt; filtered = new LinkedHashMap&lt;&gt;();</b>
<b class="nc">&nbsp;			headers.forEach((name, value) -&gt; {</b>
<b class="nc">&nbsp;				if (!this.filteredHeaderNames.contains(name.toLowerCase())) {</b>
<b class="nc">&nbsp;					filtered.put(name, value);</b>
&nbsp;				}
&nbsp;			});
<b class="nc">&nbsp;			return filtered;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-04-01 11:12</div>
</div>
</body>
</html>
