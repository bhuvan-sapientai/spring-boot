


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > DatabaseDriver</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.springframework.boot.jdbc</a>
</div>

<h1>Coverage Summary for Class: DatabaseDriver (org.springframework.boot.jdbc)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">DatabaseDriver</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/13)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/49)
  </span>
</td>
</tr>
  <tr>
    <td class="name">DatabaseDriver$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DatabaseDriver$2</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DatabaseDriver$3</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DatabaseDriver$4</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DatabaseDriver$5</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DatabaseDriver$6</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DatabaseDriver$7</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/30)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/67)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp; * Copyright 2012-2024 the original author or authors.
&nbsp; *
&nbsp; * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
&nbsp; * you may not use this file except in compliance with the License.
&nbsp; * You may obtain a copy of the License at
&nbsp; *
&nbsp; *      https://www.apache.org/licenses/LICENSE-2.0
&nbsp; *
&nbsp; * Unless required by applicable law or agreed to in writing, software
&nbsp; * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
&nbsp; * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
&nbsp; * See the License for the specific language governing permissions and
&nbsp; * limitations under the License.
&nbsp; */
&nbsp;
&nbsp;package org.springframework.boot.jdbc;
&nbsp;
&nbsp;import java.util.Arrays;
&nbsp;import java.util.Collection;
&nbsp;import java.util.Collections;
&nbsp;import java.util.Locale;
&nbsp;
&nbsp;import org.springframework.util.Assert;
&nbsp;import org.springframework.util.StringUtils;
&nbsp;
&nbsp;/**
&nbsp; * Enumeration of common database drivers.
&nbsp; *
&nbsp; * @author Phillip Webb
&nbsp; * @author Maciej Walkowiak
&nbsp; * @author Marten Deinum
&nbsp; * @author Stephane Nicoll
&nbsp; * @since 1.4.0
&nbsp; */
<b class="nc">&nbsp;public enum DatabaseDriver {</b>
&nbsp;
&nbsp;	/**
&nbsp;	 * Unknown type.
&nbsp;	 */
<b class="nc">&nbsp;	UNKNOWN(null, null),</b>
&nbsp;
&nbsp;	/**
&nbsp;	 * Apache Derby.
&nbsp;	 */
<b class="nc">&nbsp;	DERBY(&quot;Apache Derby&quot;, &quot;org.apache.derby.jdbc.EmbeddedDriver&quot;, &quot;org.apache.derby.jdbc.EmbeddedXADataSource&quot;,</b>
&nbsp;			&quot;SELECT 1 FROM SYSIBM.SYSDUMMY1&quot;),
&nbsp;
&nbsp;	/**
&nbsp;	 * H2.
&nbsp;	 */
<b class="nc">&nbsp;	H2(&quot;H2&quot;, &quot;org.h2.Driver&quot;, &quot;org.h2.jdbcx.JdbcDataSource&quot;, &quot;SELECT 1&quot;),</b>
&nbsp;
&nbsp;	/**
&nbsp;	 * HyperSQL DataBase.
&nbsp;	 */
<b class="nc">&nbsp;	HSQLDB(&quot;HSQL Database Engine&quot;, &quot;org.hsqldb.jdbc.JDBCDriver&quot;, &quot;org.hsqldb.jdbc.pool.JDBCXADataSource&quot;,</b>
&nbsp;			&quot;SELECT COUNT(*) FROM INFORMATION_SCHEMA.SYSTEM_USERS&quot;),
&nbsp;
&nbsp;	/**
&nbsp;	 * SQLite.
&nbsp;	 */
<b class="nc">&nbsp;	SQLITE(&quot;SQLite&quot;, &quot;org.sqlite.JDBC&quot;),</b>
&nbsp;
&nbsp;	/**
&nbsp;	 * MySQL.
&nbsp;	 */
<b class="nc">&nbsp;	MYSQL(&quot;MySQL&quot;, &quot;com.mysql.cj.jdbc.Driver&quot;, &quot;com.mysql.cj.jdbc.MysqlXADataSource&quot;, &quot;/* ping */ SELECT 1&quot;),</b>
&nbsp;
&nbsp;	/**
&nbsp;	 * Maria DB.
&nbsp;	 */
<b class="nc">&nbsp;	MARIADB(&quot;MariaDB&quot;, &quot;org.mariadb.jdbc.Driver&quot;, &quot;org.mariadb.jdbc.MariaDbDataSource&quot;, &quot;SELECT 1&quot;),</b>
&nbsp;
&nbsp;	/**
&nbsp;	 * Oracle.
&nbsp;	 */
<b class="nc">&nbsp;	ORACLE(&quot;Oracle&quot;, &quot;oracle.jdbc.OracleDriver&quot;, &quot;oracle.jdbc.xa.client.OracleXADataSource&quot;,</b>
&nbsp;			&quot;SELECT &#39;Hello&#39; from DUAL&quot;),
&nbsp;
&nbsp;	/**
&nbsp;	 * Postgres.
&nbsp;	 */
<b class="nc">&nbsp;	POSTGRESQL(&quot;PostgreSQL&quot;, &quot;org.postgresql.Driver&quot;, &quot;org.postgresql.xa.PGXADataSource&quot;, &quot;SELECT 1&quot;),</b>
&nbsp;
&nbsp;	/**
&nbsp;	 * Amazon Redshift.
&nbsp;	 * @since 2.2.0
&nbsp;	 */
<b class="nc">&nbsp;	REDSHIFT(&quot;Redshift&quot;, &quot;com.amazon.redshift.jdbc.Driver&quot;, null, &quot;SELECT 1&quot;),</b>
&nbsp;
&nbsp;	/**
&nbsp;	 * HANA - SAP HANA Database - HDB.
&nbsp;	 * @since 2.1.0
&nbsp;	 */
<b class="nc">&nbsp;	HANA(&quot;HDB&quot;, &quot;com.sap.db.jdbc.Driver&quot;, &quot;com.sap.db.jdbcext.XADataSourceSAP&quot;, &quot;SELECT 1 FROM SYS.DUMMY&quot;) {</b>
&nbsp;
&nbsp;		@Override
&nbsp;		protected Collection&lt;String&gt; getUrlPrefixes() {
<b class="nc">&nbsp;			return Collections.singleton(&quot;sap&quot;);</b>
&nbsp;		}
&nbsp;
&nbsp;	},
&nbsp;
&nbsp;	/**
&nbsp;	 * jTDS. As it can be used for several databases, there isn&#39;t a single product name we
&nbsp;	 * could rely on.
&nbsp;	 */
<b class="nc">&nbsp;	JTDS(null, &quot;net.sourceforge.jtds.jdbc.Driver&quot;),</b>
&nbsp;
&nbsp;	/**
&nbsp;	 * SQL Server.
&nbsp;	 */
<b class="nc">&nbsp;	SQLSERVER(&quot;Microsoft SQL Server&quot;, &quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;,</b>
&nbsp;			&quot;com.microsoft.sqlserver.jdbc.SQLServerXADataSource&quot;, &quot;SELECT 1&quot;) {
&nbsp;
&nbsp;		@Override
&nbsp;		protected boolean matchProductName(String productName) {
<b class="nc">&nbsp;			return super.matchProductName(productName) || &quot;SQL SERVER&quot;.equalsIgnoreCase(productName);</b>
&nbsp;		}
&nbsp;
&nbsp;	},
&nbsp;
&nbsp;	/**
&nbsp;	 * Firebird.
&nbsp;	 */
<b class="nc">&nbsp;	FIREBIRD(&quot;Firebird&quot;, &quot;org.firebirdsql.jdbc.FBDriver&quot;, &quot;org.firebirdsql.ds.FBXADataSource&quot;,</b>
&nbsp;			&quot;SELECT 1 FROM RDB$DATABASE&quot;) {
&nbsp;
&nbsp;		@Override
&nbsp;		protected Collection&lt;String&gt; getUrlPrefixes() {
<b class="nc">&nbsp;			return Arrays.asList(&quot;firebirdsql&quot;, &quot;firebird&quot;);</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		protected boolean matchProductName(String productName) {
<b class="nc">&nbsp;			return super.matchProductName(productName)</b>
<b class="nc">&nbsp;					|| productName.toLowerCase(Locale.ENGLISH).startsWith(&quot;firebird&quot;);</b>
&nbsp;		}
&nbsp;	},
&nbsp;
&nbsp;	/**
&nbsp;	 * DB2 Server.
&nbsp;	 */
<b class="nc">&nbsp;	DB2(&quot;DB2&quot;, &quot;com.ibm.db2.jcc.DB2Driver&quot;, &quot;com.ibm.db2.jcc.DB2XADataSource&quot;, &quot;SELECT 1 FROM SYSIBM.SYSDUMMY1&quot;) {</b>
&nbsp;
&nbsp;		@Override
&nbsp;		protected boolean matchProductName(String productName) {
<b class="nc">&nbsp;			return super.matchProductName(productName) || productName.toLowerCase(Locale.ENGLISH).startsWith(&quot;db2/&quot;);</b>
&nbsp;		}
&nbsp;	},
&nbsp;
&nbsp;	/**
&nbsp;	 * DB2 AS400 Server.
&nbsp;	 */
<b class="nc">&nbsp;	DB2_AS400(&quot;DB2 UDB for AS/400&quot;, &quot;com.ibm.as400.access.AS400JDBCDriver&quot;,</b>
&nbsp;			&quot;com.ibm.as400.access.AS400JDBCXADataSource&quot;, &quot;SELECT 1 FROM SYSIBM.SYSDUMMY1&quot;) {
&nbsp;
&nbsp;		@Override
&nbsp;		public String getId() {
<b class="nc">&nbsp;			return &quot;db2&quot;;</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		protected Collection&lt;String&gt; getUrlPrefixes() {
<b class="nc">&nbsp;			return Collections.singleton(&quot;as400&quot;);</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		protected boolean matchProductName(String productName) {
<b class="nc">&nbsp;			return super.matchProductName(productName) || productName.toLowerCase(Locale.ENGLISH).contains(&quot;as/400&quot;);</b>
&nbsp;		}
&nbsp;	},
&nbsp;
&nbsp;	/**
&nbsp;	 * Teradata.
&nbsp;	 */
<b class="nc">&nbsp;	TERADATA(&quot;Teradata&quot;, &quot;com.teradata.jdbc.TeraDriver&quot;),</b>
&nbsp;
&nbsp;	/**
&nbsp;	 * Informix.
&nbsp;	 */
<b class="nc">&nbsp;	INFORMIX(&quot;Informix Dynamic Server&quot;, &quot;com.informix.jdbc.IfxDriver&quot;, null, &quot;select count(*) from systables&quot;) {</b>
&nbsp;
&nbsp;		@Override
&nbsp;		protected Collection&lt;String&gt; getUrlPrefixes() {
<b class="nc">&nbsp;			return Arrays.asList(&quot;informix-sqli&quot;, &quot;informix-direct&quot;);</b>
&nbsp;		}
&nbsp;
&nbsp;	},
&nbsp;
&nbsp;	/**
&nbsp;	 * Apache Phoenix.
&nbsp;	 * @since 2.5.0
&nbsp;	 */
<b class="nc">&nbsp;	PHOENIX(&quot;Apache Phoenix&quot;, &quot;org.apache.phoenix.jdbc.PhoenixDriver&quot;, null, &quot;SELECT 1 FROM SYSTEM.CATALOG LIMIT 1&quot;),</b>
&nbsp;
&nbsp;	/**
&nbsp;	 * Testcontainers.
&nbsp;	 */
<b class="nc">&nbsp;	TESTCONTAINERS(null, &quot;org.testcontainers.jdbc.ContainerDatabaseDriver&quot;) {</b>
&nbsp;
&nbsp;		@Override
&nbsp;		protected Collection&lt;String&gt; getUrlPrefixes() {
<b class="nc">&nbsp;			return Collections.singleton(&quot;tc&quot;);</b>
&nbsp;		}
&nbsp;
&nbsp;	};
&nbsp;
&nbsp;	private final String productName;
&nbsp;
&nbsp;	private final String driverClassName;
&nbsp;
&nbsp;	private final String xaDataSourceClassName;
&nbsp;
&nbsp;	private final String validationQuery;
&nbsp;
&nbsp;	DatabaseDriver(String productName, String driverClassName) {
<b class="nc">&nbsp;		this(productName, driverClassName, null);</b>
&nbsp;	}
&nbsp;
&nbsp;	DatabaseDriver(String productName, String driverClassName, String xaDataSourceClassName) {
<b class="nc">&nbsp;		this(productName, driverClassName, xaDataSourceClassName, null);</b>
&nbsp;	}
&nbsp;
<b class="nc">&nbsp;	DatabaseDriver(String productName, String driverClassName, String xaDataSourceClassName, String validationQuery) {</b>
<b class="nc">&nbsp;		this.productName = productName;</b>
<b class="nc">&nbsp;		this.driverClassName = driverClassName;</b>
<b class="nc">&nbsp;		this.xaDataSourceClassName = xaDataSourceClassName;</b>
<b class="nc">&nbsp;		this.validationQuery = validationQuery;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Return the identifier of this driver.
&nbsp;	 * @return the identifier
&nbsp;	 */
&nbsp;	public String getId() {
<b class="nc">&nbsp;		return name().toLowerCase(Locale.ENGLISH);</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Return the url prefixes of this driver.
&nbsp;	 * @return the url prefixes
&nbsp;	 */
&nbsp;	protected Collection&lt;String&gt; getUrlPrefixes() {
<b class="nc">&nbsp;		return Collections.singleton(name().toLowerCase(Locale.ENGLISH));</b>
&nbsp;	}
&nbsp;
&nbsp;	protected boolean matchProductName(String productName) {
<b class="nc">&nbsp;		return this.productName != null &amp;&amp; this.productName.equalsIgnoreCase(productName);</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Return the driver class name.
&nbsp;	 * @return the class name or {@code null}
&nbsp;	 */
&nbsp;	public String getDriverClassName() {
<b class="nc">&nbsp;		return this.driverClassName;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Return the XA driver source class name.
&nbsp;	 * @return the class name or {@code null}
&nbsp;	 */
&nbsp;	public String getXaDataSourceClassName() {
<b class="nc">&nbsp;		return this.xaDataSourceClassName;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Return the validation query.
&nbsp;	 * @return the validation query or {@code null}
&nbsp;	 */
&nbsp;	public String getValidationQuery() {
<b class="nc">&nbsp;		return this.validationQuery;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Find a {@link DatabaseDriver} for the given URL.
&nbsp;	 * @param url the JDBC URL
&nbsp;	 * @return the database driver or {@link #UNKNOWN} if not found
&nbsp;	 */
&nbsp;	public static DatabaseDriver fromJdbcUrl(String url) {
<b class="nc">&nbsp;		if (StringUtils.hasLength(url)) {</b>
<b class="nc">&nbsp;			Assert.isTrue(url.startsWith(&quot;jdbc&quot;), &quot;URL must start with &#39;jdbc&#39;&quot;);</b>
<b class="nc">&nbsp;			String urlWithoutPrefix = url.substring(&quot;jdbc&quot;.length()).toLowerCase(Locale.ENGLISH);</b>
<b class="nc">&nbsp;			for (DatabaseDriver driver : values()) {</b>
<b class="nc">&nbsp;				for (String urlPrefix : driver.getUrlPrefixes()) {</b>
<b class="nc">&nbsp;					String prefix = &quot;:&quot; + urlPrefix + &quot;:&quot;;</b>
<b class="nc">&nbsp;					if (driver != UNKNOWN &amp;&amp; urlWithoutPrefix.startsWith(prefix)) {</b>
<b class="nc">&nbsp;						return driver;</b>
&nbsp;					}
<b class="nc">&nbsp;				}</b>
&nbsp;			}
&nbsp;		}
<b class="nc">&nbsp;		return UNKNOWN;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Find a {@link DatabaseDriver} for the given product name.
&nbsp;	 * @param productName product name
&nbsp;	 * @return the database driver or {@link #UNKNOWN} if not found
&nbsp;	 */
&nbsp;	public static DatabaseDriver fromProductName(String productName) {
<b class="nc">&nbsp;		if (StringUtils.hasLength(productName)) {</b>
<b class="nc">&nbsp;			for (DatabaseDriver candidate : values()) {</b>
<b class="nc">&nbsp;				if (candidate.matchProductName(productName)) {</b>
<b class="nc">&nbsp;					return candidate;</b>
&nbsp;				}
&nbsp;			}
&nbsp;		}
<b class="nc">&nbsp;		return UNKNOWN;</b>
&nbsp;	}
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-04-01 11:12</div>
</div>
</body>
</html>
