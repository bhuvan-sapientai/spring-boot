


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > JacksonAutoConfiguration</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.springframework.boot.autoconfigure.jackson</a>
</div>

<h1>Coverage Summary for Class: JacksonAutoConfiguration (org.springframework.boot.autoconfigure.jackson)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">JacksonAutoConfiguration</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
</tr>
  <tr>
    <td class="name">JacksonAutoConfiguration$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/16)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/71)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">JacksonAutoConfiguration$JacksonAutoConfigurationRuntimeHints</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/9)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">JacksonAutoConfiguration$JacksonMixinConfiguration</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/7)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">JacksonAutoConfiguration$JacksonObjectMapperConfiguration</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">JacksonAutoConfiguration$ParameterNamesModuleConfiguration</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/37)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/108)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp; * Copyright 2012-2023 the original author or authors.
&nbsp; *
&nbsp; * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
&nbsp; * you may not use this file except in compliance with the License.
&nbsp; * You may obtain a copy of the License at
&nbsp; *
&nbsp; *      https://www.apache.org/licenses/LICENSE-2.0
&nbsp; *
&nbsp; * Unless required by applicable law or agreed to in writing, software
&nbsp; * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
&nbsp; * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
&nbsp; * See the License for the specific language governing permissions and
&nbsp; * limitations under the License.
&nbsp; */
&nbsp;
&nbsp;package org.springframework.boot.autoconfigure.jackson;
&nbsp;
&nbsp;import java.lang.reflect.Field;
&nbsp;import java.text.DateFormat;
&nbsp;import java.text.SimpleDateFormat;
&nbsp;import java.util.Collection;
&nbsp;import java.util.Collections;
&nbsp;import java.util.HashMap;
&nbsp;import java.util.List;
&nbsp;import java.util.Locale;
&nbsp;import java.util.Map;
&nbsp;import java.util.TimeZone;
&nbsp;import java.util.stream.Stream;
&nbsp;
&nbsp;import com.fasterxml.jackson.annotation.JsonAutoDetect;
&nbsp;import com.fasterxml.jackson.annotation.JsonCreator;
&nbsp;import com.fasterxml.jackson.annotation.PropertyAccessor;
&nbsp;import com.fasterxml.jackson.databind.Module;
&nbsp;import com.fasterxml.jackson.databind.ObjectMapper;
&nbsp;import com.fasterxml.jackson.databind.PropertyNamingStrategies;
&nbsp;import com.fasterxml.jackson.databind.PropertyNamingStrategy;
&nbsp;import com.fasterxml.jackson.databind.SerializationFeature;
&nbsp;import com.fasterxml.jackson.databind.cfg.ConstructorDetector;
&nbsp;import com.fasterxml.jackson.module.paramnames.ParameterNamesModule;
&nbsp;
&nbsp;import org.springframework.aot.hint.ReflectionHints;
&nbsp;import org.springframework.aot.hint.RuntimeHints;
&nbsp;import org.springframework.aot.hint.RuntimeHintsRegistrar;
&nbsp;import org.springframework.beans.BeanUtils;
&nbsp;import org.springframework.beans.factory.ObjectProvider;
&nbsp;import org.springframework.boot.autoconfigure.AutoConfiguration;
&nbsp;import org.springframework.boot.autoconfigure.AutoConfigurationPackages;
&nbsp;import org.springframework.boot.autoconfigure.condition.ConditionalOnClass;
&nbsp;import org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;
&nbsp;import org.springframework.boot.autoconfigure.jackson.JacksonProperties.ConstructorDetectorStrategy;
&nbsp;import org.springframework.boot.context.properties.EnableConfigurationProperties;
&nbsp;import org.springframework.boot.jackson.JsonComponentModule;
&nbsp;import org.springframework.boot.jackson.JsonMixinModule;
&nbsp;import org.springframework.boot.jackson.JsonMixinModuleEntries;
&nbsp;import org.springframework.context.ApplicationContext;
&nbsp;import org.springframework.context.annotation.Bean;
&nbsp;import org.springframework.context.annotation.Configuration;
&nbsp;import org.springframework.context.annotation.Primary;
&nbsp;import org.springframework.context.annotation.Scope;
&nbsp;import org.springframework.core.Ordered;
&nbsp;import org.springframework.http.converter.json.Jackson2ObjectMapperBuilder;
&nbsp;import org.springframework.util.Assert;
&nbsp;import org.springframework.util.ClassUtils;
&nbsp;import org.springframework.util.ReflectionUtils;
&nbsp;
&nbsp;/**
&nbsp; * Auto configuration for Jackson. The following auto-configuration will get applied:
&nbsp; * &lt;ul&gt;
&nbsp; * &lt;li&gt;an {@link ObjectMapper} in case none is already configured.&lt;/li&gt;
&nbsp; * &lt;li&gt;a {@link Jackson2ObjectMapperBuilder} in case none is already configured.&lt;/li&gt;
&nbsp; * &lt;li&gt;auto-registration for all {@link Module} beans with all {@link ObjectMapper} beans
&nbsp; * (including the defaulted ones).&lt;/li&gt;
&nbsp; * &lt;/ul&gt;
&nbsp; *
&nbsp; * @author Oliver Gierke
&nbsp; * @author Andy Wilkinson
&nbsp; * @author Marcel Overdijk
&nbsp; * @author Sebastien Deleuze
&nbsp; * @author Johannes Edmeier
&nbsp; * @author Phillip Webb
&nbsp; * @author Eddú Meléndez
&nbsp; * @author Ralf Ueberfuhr
&nbsp; * @since 1.1.0
&nbsp; */
&nbsp;@AutoConfiguration
&nbsp;@ConditionalOnClass(ObjectMapper.class)
<b class="nc">&nbsp;public class JacksonAutoConfiguration {</b>
&nbsp;
&nbsp;	private static final Map&lt;?, Boolean&gt; FEATURE_DEFAULTS;
&nbsp;
&nbsp;	static {
<b class="nc">&nbsp;		Map&lt;Object, Boolean&gt; featureDefaults = new HashMap&lt;&gt;();</b>
<b class="nc">&nbsp;		featureDefaults.put(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);</b>
<b class="nc">&nbsp;		featureDefaults.put(SerializationFeature.WRITE_DURATIONS_AS_TIMESTAMPS, false);</b>
<b class="nc">&nbsp;		FEATURE_DEFAULTS = Collections.unmodifiableMap(featureDefaults);</b>
&nbsp;	}
&nbsp;
&nbsp;	@Bean
&nbsp;	public JsonComponentModule jsonComponentModule() {
<b class="nc">&nbsp;		return new JsonComponentModule();</b>
&nbsp;	}
&nbsp;
&nbsp;	@Configuration(proxyBeanMethods = false)
<b class="nc">&nbsp;	static class JacksonMixinConfiguration {</b>
&nbsp;
&nbsp;		@Bean
&nbsp;		static JsonMixinModuleEntries jsonMixinModuleEntries(ApplicationContext context) {
<b class="nc">&nbsp;			List&lt;String&gt; packages = AutoConfigurationPackages.has(context) ? AutoConfigurationPackages.get(context)</b>
<b class="nc">&nbsp;					: Collections.emptyList();</b>
<b class="nc">&nbsp;			return JsonMixinModuleEntries.scan(context, packages);</b>
&nbsp;		}
&nbsp;
&nbsp;		@Bean
&nbsp;		JsonMixinModule jsonMixinModule(ApplicationContext context, JsonMixinModuleEntries entries) {
<b class="nc">&nbsp;			JsonMixinModule jsonMixinModule = new JsonMixinModule();</b>
<b class="nc">&nbsp;			jsonMixinModule.registerEntries(entries, context.getClassLoader());</b>
<b class="nc">&nbsp;			return jsonMixinModule;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	@Configuration(proxyBeanMethods = false)
&nbsp;	@ConditionalOnClass(Jackson2ObjectMapperBuilder.class)
<b class="nc">&nbsp;	static class JacksonObjectMapperConfiguration {</b>
&nbsp;
&nbsp;		@Bean
&nbsp;		@Primary
&nbsp;		@ConditionalOnMissingBean
&nbsp;		ObjectMapper jacksonObjectMapper(Jackson2ObjectMapperBuilder builder) {
<b class="nc">&nbsp;			return builder.createXmlMapper(false).build();</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	@Configuration(proxyBeanMethods = false)
&nbsp;	@ConditionalOnClass(ParameterNamesModule.class)
<b class="nc">&nbsp;	static class ParameterNamesModuleConfiguration {</b>
&nbsp;
&nbsp;		@Bean
&nbsp;		@ConditionalOnMissingBean
&nbsp;		ParameterNamesModule parameterNamesModule() {
<b class="nc">&nbsp;			return new ParameterNamesModule(JsonCreator.Mode.DEFAULT);</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	@Configuration(proxyBeanMethods = false)
&nbsp;	@ConditionalOnClass(Jackson2ObjectMapperBuilder.class)
<b class="nc">&nbsp;	static class JacksonObjectMapperBuilderConfiguration {</b>
&nbsp;
&nbsp;		@Bean
&nbsp;		@Scope(&quot;prototype&quot;)
&nbsp;		@ConditionalOnMissingBean
&nbsp;		Jackson2ObjectMapperBuilder jacksonObjectMapperBuilder(ApplicationContext applicationContext,
&nbsp;				List&lt;Jackson2ObjectMapperBuilderCustomizer&gt; customizers) {
<b class="nc">&nbsp;			Jackson2ObjectMapperBuilder builder = new Jackson2ObjectMapperBuilder();</b>
<b class="nc">&nbsp;			builder.applicationContext(applicationContext);</b>
<b class="nc">&nbsp;			customize(builder, customizers);</b>
<b class="nc">&nbsp;			return builder;</b>
&nbsp;		}
&nbsp;
&nbsp;		private void customize(Jackson2ObjectMapperBuilder builder,
&nbsp;				List&lt;Jackson2ObjectMapperBuilderCustomizer&gt; customizers) {
<b class="nc">&nbsp;			for (Jackson2ObjectMapperBuilderCustomizer customizer : customizers) {</b>
<b class="nc">&nbsp;				customizer.customize(builder);</b>
<b class="nc">&nbsp;			}</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	@Configuration(proxyBeanMethods = false)
&nbsp;	@ConditionalOnClass(Jackson2ObjectMapperBuilder.class)
&nbsp;	@EnableConfigurationProperties(JacksonProperties.class)
<b class="nc">&nbsp;	static class Jackson2ObjectMapperBuilderCustomizerConfiguration {</b>
&nbsp;
&nbsp;		@Bean
&nbsp;		StandardJackson2ObjectMapperBuilderCustomizer standardJacksonObjectMapperBuilderCustomizer(
&nbsp;				JacksonProperties jacksonProperties, ObjectProvider&lt;Module&gt; modules) {
<b class="nc">&nbsp;			return new StandardJackson2ObjectMapperBuilderCustomizer(jacksonProperties, modules.stream().toList());</b>
&nbsp;		}
&nbsp;
&nbsp;		static final class StandardJackson2ObjectMapperBuilderCustomizer
&nbsp;				implements Jackson2ObjectMapperBuilderCustomizer, Ordered {
&nbsp;
&nbsp;			private final JacksonProperties jacksonProperties;
&nbsp;
&nbsp;			private final Collection&lt;Module&gt; modules;
&nbsp;
&nbsp;			StandardJackson2ObjectMapperBuilderCustomizer(JacksonProperties jacksonProperties,
<b class="nc">&nbsp;					Collection&lt;Module&gt; modules) {</b>
<b class="nc">&nbsp;				this.jacksonProperties = jacksonProperties;</b>
<b class="nc">&nbsp;				this.modules = modules;</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			public int getOrder() {
<b class="nc">&nbsp;				return 0;</b>
&nbsp;			}
&nbsp;
&nbsp;			@Override
&nbsp;			public void customize(Jackson2ObjectMapperBuilder builder) {
<b class="nc">&nbsp;				if (this.jacksonProperties.getDefaultPropertyInclusion() != null) {</b>
<b class="nc">&nbsp;					builder.serializationInclusion(this.jacksonProperties.getDefaultPropertyInclusion());</b>
&nbsp;				}
<b class="nc">&nbsp;				if (this.jacksonProperties.getTimeZone() != null) {</b>
<b class="nc">&nbsp;					builder.timeZone(this.jacksonProperties.getTimeZone());</b>
&nbsp;				}
<b class="nc">&nbsp;				configureFeatures(builder, FEATURE_DEFAULTS);</b>
<b class="nc">&nbsp;				configureVisibility(builder, this.jacksonProperties.getVisibility());</b>
<b class="nc">&nbsp;				configureFeatures(builder, this.jacksonProperties.getDeserialization());</b>
<b class="nc">&nbsp;				configureFeatures(builder, this.jacksonProperties.getSerialization());</b>
<b class="nc">&nbsp;				configureFeatures(builder, this.jacksonProperties.getMapper());</b>
<b class="nc">&nbsp;				configureFeatures(builder, this.jacksonProperties.getParser());</b>
<b class="nc">&nbsp;				configureFeatures(builder, this.jacksonProperties.getGenerator());</b>
<b class="nc">&nbsp;				configureFeatures(builder, this.jacksonProperties.getDatatype().getEnum());</b>
<b class="nc">&nbsp;				configureFeatures(builder, this.jacksonProperties.getDatatype().getJsonNode());</b>
<b class="nc">&nbsp;				configureDateFormat(builder);</b>
<b class="nc">&nbsp;				configurePropertyNamingStrategy(builder);</b>
<b class="nc">&nbsp;				configureModules(builder);</b>
<b class="nc">&nbsp;				configureLocale(builder);</b>
<b class="nc">&nbsp;				configureDefaultLeniency(builder);</b>
<b class="nc">&nbsp;				configureConstructorDetector(builder);</b>
&nbsp;			}
&nbsp;
&nbsp;			private void configureFeatures(Jackson2ObjectMapperBuilder builder, Map&lt;?, Boolean&gt; features) {
<b class="nc">&nbsp;				features.forEach((feature, value) -&gt; {</b>
<b class="nc">&nbsp;					if (value != null) {</b>
<b class="nc">&nbsp;						if (value) {</b>
<b class="nc">&nbsp;							builder.featuresToEnable(feature);</b>
&nbsp;						}
&nbsp;						else {
<b class="nc">&nbsp;							builder.featuresToDisable(feature);</b>
&nbsp;						}
&nbsp;					}
&nbsp;				});
&nbsp;			}
&nbsp;
&nbsp;			private void configureVisibility(Jackson2ObjectMapperBuilder builder,
&nbsp;					Map&lt;PropertyAccessor, JsonAutoDetect.Visibility&gt; visibilities) {
<b class="nc">&nbsp;				visibilities.forEach(builder::visibility);</b>
&nbsp;			}
&nbsp;
&nbsp;			private void configureDateFormat(Jackson2ObjectMapperBuilder builder) {
&nbsp;				// We support a fully qualified class name extending DateFormat or a date
&nbsp;				// pattern string value
<b class="nc">&nbsp;				String dateFormat = this.jacksonProperties.getDateFormat();</b>
<b class="nc">&nbsp;				if (dateFormat != null) {</b>
&nbsp;					try {
<b class="nc">&nbsp;						Class&lt;?&gt; dateFormatClass = ClassUtils.forName(dateFormat, null);</b>
<b class="nc">&nbsp;						builder.dateFormat((DateFormat) BeanUtils.instantiateClass(dateFormatClass));</b>
&nbsp;					}
<b class="nc">&nbsp;					catch (ClassNotFoundException ex) {</b>
<b class="nc">&nbsp;						SimpleDateFormat simpleDateFormat = new SimpleDateFormat(dateFormat);</b>
&nbsp;						// Since Jackson 2.6.3 we always need to set a TimeZone (see
&nbsp;						// gh-4170). If none in our properties fallback to the Jackson&#39;s
&nbsp;						// default
<b class="nc">&nbsp;						TimeZone timeZone = this.jacksonProperties.getTimeZone();</b>
<b class="nc">&nbsp;						if (timeZone == null) {</b>
<b class="nc">&nbsp;							timeZone = new ObjectMapper().getSerializationConfig().getTimeZone();</b>
&nbsp;						}
<b class="nc">&nbsp;						simpleDateFormat.setTimeZone(timeZone);</b>
<b class="nc">&nbsp;						builder.dateFormat(simpleDateFormat);</b>
<b class="nc">&nbsp;					}</b>
&nbsp;				}
&nbsp;			}
&nbsp;
&nbsp;			private void configurePropertyNamingStrategy(Jackson2ObjectMapperBuilder builder) {
&nbsp;				// We support a fully qualified class name extending Jackson&#39;s
&nbsp;				// PropertyNamingStrategy or a string value corresponding to the constant
&nbsp;				// names in PropertyNamingStrategy which hold default provided
&nbsp;				// implementations
<b class="nc">&nbsp;				String strategy = this.jacksonProperties.getPropertyNamingStrategy();</b>
<b class="nc">&nbsp;				if (strategy != null) {</b>
&nbsp;					try {
<b class="nc">&nbsp;						configurePropertyNamingStrategyClass(builder, ClassUtils.forName(strategy, null));</b>
&nbsp;					}
<b class="nc">&nbsp;					catch (ClassNotFoundException ex) {</b>
<b class="nc">&nbsp;						configurePropertyNamingStrategyField(builder, strategy);</b>
<b class="nc">&nbsp;					}</b>
&nbsp;				}
&nbsp;			}
&nbsp;
&nbsp;			private void configurePropertyNamingStrategyClass(Jackson2ObjectMapperBuilder builder,
&nbsp;					Class&lt;?&gt; propertyNamingStrategyClass) {
<b class="nc">&nbsp;				builder.propertyNamingStrategy(</b>
<b class="nc">&nbsp;						(PropertyNamingStrategy) BeanUtils.instantiateClass(propertyNamingStrategyClass));</b>
&nbsp;			}
&nbsp;
&nbsp;			private void configurePropertyNamingStrategyField(Jackson2ObjectMapperBuilder builder, String fieldName) {
&nbsp;				// Find the field (this way we automatically support new constants
&nbsp;				// that may be added by Jackson in the future)
<b class="nc">&nbsp;				Field field = findPropertyNamingStrategyField(fieldName);</b>
<b class="nc">&nbsp;				Assert.notNull(field, () -&gt; &quot;Constant named &#39;&quot; + fieldName + &quot;&#39; not found&quot;);</b>
&nbsp;				try {
<b class="nc">&nbsp;					builder.propertyNamingStrategy((PropertyNamingStrategy) field.get(null));</b>
&nbsp;				}
<b class="nc">&nbsp;				catch (Exception ex) {</b>
<b class="nc">&nbsp;					throw new IllegalStateException(ex);</b>
<b class="nc">&nbsp;				}</b>
&nbsp;			}
&nbsp;
&nbsp;			private Field findPropertyNamingStrategyField(String fieldName) {
<b class="nc">&nbsp;				return ReflectionUtils.findField(com.fasterxml.jackson.databind.PropertyNamingStrategies.class,</b>
&nbsp;						fieldName, PropertyNamingStrategy.class);
&nbsp;			}
&nbsp;
&nbsp;			private void configureModules(Jackson2ObjectMapperBuilder builder) {
<b class="nc">&nbsp;				builder.modulesToInstall(this.modules.toArray(new Module[0]));</b>
&nbsp;			}
&nbsp;
&nbsp;			private void configureLocale(Jackson2ObjectMapperBuilder builder) {
<b class="nc">&nbsp;				Locale locale = this.jacksonProperties.getLocale();</b>
<b class="nc">&nbsp;				if (locale != null) {</b>
<b class="nc">&nbsp;					builder.locale(locale);</b>
&nbsp;				}
&nbsp;			}
&nbsp;
&nbsp;			private void configureDefaultLeniency(Jackson2ObjectMapperBuilder builder) {
<b class="nc">&nbsp;				Boolean defaultLeniency = this.jacksonProperties.getDefaultLeniency();</b>
<b class="nc">&nbsp;				if (defaultLeniency != null) {</b>
<b class="nc">&nbsp;					builder.postConfigurer((objectMapper) -&gt; objectMapper.setDefaultLeniency(defaultLeniency));</b>
&nbsp;				}
&nbsp;			}
&nbsp;
&nbsp;			private void configureConstructorDetector(Jackson2ObjectMapperBuilder builder) {
<b class="nc">&nbsp;				ConstructorDetectorStrategy strategy = this.jacksonProperties.getConstructorDetector();</b>
<b class="nc">&nbsp;				if (strategy != null) {</b>
<b class="nc">&nbsp;					builder.postConfigurer((objectMapper) -&gt; {</b>
<b class="nc">&nbsp;						switch (strategy) {</b>
&nbsp;							case USE_PROPERTIES_BASED -&gt;
<b class="nc">&nbsp;								objectMapper.setConstructorDetector(ConstructorDetector.USE_PROPERTIES_BASED);</b>
&nbsp;							case USE_DELEGATING -&gt;
<b class="nc">&nbsp;								objectMapper.setConstructorDetector(ConstructorDetector.USE_DELEGATING);</b>
&nbsp;							case EXPLICIT_ONLY -&gt;
<b class="nc">&nbsp;								objectMapper.setConstructorDetector(ConstructorDetector.EXPLICIT_ONLY);</b>
<b class="nc">&nbsp;							default -&gt; objectMapper.setConstructorDetector(ConstructorDetector.DEFAULT);</b>
&nbsp;						}
&nbsp;					});
&nbsp;				}
&nbsp;			}
&nbsp;
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
<b class="nc">&nbsp;	static class JacksonAutoConfigurationRuntimeHints implements RuntimeHintsRegistrar {</b>
&nbsp;
&nbsp;		@Override
&nbsp;		public void registerHints(RuntimeHints hints, ClassLoader classLoader) {
<b class="nc">&nbsp;			if (ClassUtils.isPresent(&quot;com.fasterxml.jackson.databind.PropertyNamingStrategy&quot;, classLoader)) {</b>
<b class="nc">&nbsp;				registerPropertyNamingStrategyHints(hints.reflection());</b>
&nbsp;			}
&nbsp;		}
&nbsp;
&nbsp;		/**
&nbsp;		 * Register hints for the {@code configurePropertyNamingStrategyField} method to
&nbsp;		 * use.
&nbsp;		 * @param hints reflection hints
&nbsp;		 */
&nbsp;		private void registerPropertyNamingStrategyHints(ReflectionHints hints) {
<b class="nc">&nbsp;			registerPropertyNamingStrategyHints(hints, PropertyNamingStrategies.class);</b>
&nbsp;		}
&nbsp;
&nbsp;		private void registerPropertyNamingStrategyHints(ReflectionHints hints, Class&lt;?&gt; type) {
<b class="nc">&nbsp;			Stream.of(type.getDeclaredFields())</b>
<b class="nc">&nbsp;				.filter(this::isPropertyNamingStrategyField)</b>
<b class="nc">&nbsp;				.forEach(hints::registerField);</b>
&nbsp;		}
&nbsp;
&nbsp;		private boolean isPropertyNamingStrategyField(Field candidate) {
<b class="nc">&nbsp;			return ReflectionUtils.isPublicStaticFinal(candidate)</b>
<b class="nc">&nbsp;					&amp;&amp; candidate.getType().isAssignableFrom(PropertyNamingStrategy.class);</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-04-01 11:12</div>
</div>
</body>
</html>
