


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > DataSourceBuilder</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.springframework.boot.jdbc</a>
</div>

<h1>Coverage Summary for Class: DataSourceBuilder (org.springframework.boot.jdbc)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">DataSourceBuilder</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/15)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/61)
  </span>
</td>
</tr>
  <tr>
    <td class="name">DataSourceBuilder$ComboPooledDataSourceProperties</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/9)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DataSourceBuilder$DataSourceProperties</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DataSourceBuilder$DataSourceProperty</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/18)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DataSourceBuilder$Getter</td>
  </tr>
  <tr>
    <td class="name">DataSourceBuilder$H2DataSourceProperties</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DataSourceBuilder$HikariDataSourceProperties</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DataSourceBuilder$MappedDataSourceProperties</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/14)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/46)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DataSourceBuilder$MappedDataSourceProperty</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/29)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DataSourceBuilder$MappedDbcp2DataSource</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DataSourceBuilder$OracleDataSourceProperties</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DataSourceBuilder$OraclePoolDataSourceProperties</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DataSourceBuilder$PostgresDataSourceProperties</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DataSourceBuilder$ReflectionDataSourceProperties</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/28)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DataSourceBuilder$Setter</td>
  </tr>
  <tr>
    <td class="name">DataSourceBuilder$SimpleDataSourceProperties</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">DataSourceBuilder$TomcatPoolDataSourceProperties</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/64)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/231)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp; * Copyright 2012-2024 the original author or authors.
&nbsp; *
&nbsp; * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
&nbsp; * you may not use this file except in compliance with the License.
&nbsp; * You may obtain a copy of the License at
&nbsp; *
&nbsp; *      https://www.apache.org/licenses/LICENSE-2.0
&nbsp; *
&nbsp; * Unless required by applicable law or agreed to in writing, software
&nbsp; * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
&nbsp; * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
&nbsp; * See the License for the specific language governing permissions and
&nbsp; * limitations under the License.
&nbsp; */
&nbsp;
&nbsp;package org.springframework.boot.jdbc;
&nbsp;
&nbsp;import java.beans.PropertyVetoException;
&nbsp;import java.lang.reflect.Method;
&nbsp;import java.sql.SQLException;
&nbsp;import java.util.Collections;
&nbsp;import java.util.HashMap;
&nbsp;import java.util.HashSet;
&nbsp;import java.util.Map;
&nbsp;import java.util.Set;
&nbsp;import java.util.function.Supplier;
&nbsp;
&nbsp;import javax.sql.DataSource;
&nbsp;
&nbsp;import com.mchange.v2.c3p0.ComboPooledDataSource;
&nbsp;import com.zaxxer.hikari.HikariDataSource;
&nbsp;import oracle.jdbc.datasource.OracleDataSource;
&nbsp;import oracle.ucp.jdbc.PoolDataSource;
&nbsp;import oracle.ucp.jdbc.PoolDataSourceImpl;
&nbsp;import org.apache.commons.dbcp2.BasicDataSource;
&nbsp;import org.h2.jdbcx.JdbcDataSource;
&nbsp;import org.postgresql.ds.PGSimpleDataSource;
&nbsp;
&nbsp;import org.springframework.beans.BeanUtils;
&nbsp;import org.springframework.core.ResolvableType;
&nbsp;import org.springframework.jdbc.datasource.SimpleDriverDataSource;
&nbsp;import org.springframework.jdbc.datasource.embedded.EmbeddedDatabase;
&nbsp;import org.springframework.util.Assert;
&nbsp;import org.springframework.util.ClassUtils;
&nbsp;import org.springframework.util.ReflectionUtils;
&nbsp;import org.springframework.util.StringUtils;
&nbsp;
&nbsp;/**
&nbsp; * Convenience class for building a {@link DataSource}. Provides a limited subset of the
&nbsp; * properties supported by a typical {@link DataSource} as well as detection logic to pick
&nbsp; * the most suitable pooling {@link DataSource} implementation.
&nbsp; * &lt;p&gt;
&nbsp; * The following pooling {@link DataSource} implementations are supported by this builder.
&nbsp; * When no {@link #type(Class) type} has been explicitly set, the first available pool
&nbsp; * implementation will be picked:
&nbsp; * &lt;ul&gt;
&nbsp; * &lt;li&gt;Hikari ({@code com.zaxxer.hikari.HikariDataSource})&lt;/li&gt;
&nbsp; * &lt;li&gt;Tomcat JDBC Pool ({@code org.apache.tomcat.jdbc.pool.DataSource})&lt;/li&gt;
&nbsp; * &lt;li&gt;Apache DBCP2 ({@code org.apache.commons.dbcp2.BasicDataSource})&lt;/li&gt;
&nbsp; * &lt;li&gt;Oracle UCP ({@code oracle.ucp.jdbc.PoolDataSourceImpl})&lt;/li&gt;
&nbsp; * &lt;/ul&gt;
&nbsp; * &lt;p&gt;
&nbsp; * The following non-pooling {@link DataSource} implementations can be used when
&nbsp; * explicitly set as a {@link #type(Class) type}:
&nbsp; * &lt;ul&gt;
&nbsp; * &lt;li&gt;Spring&#39;s {@code SimpleDriverDataSource}
&nbsp; * ({@code org.springframework.jdbc.datasource.SimpleDriverDataSource})&lt;/li&gt;
&nbsp; * &lt;li&gt;Oracle ({@code oracle.jdbc.datasource.OracleDataSource})&lt;/li&gt;
&nbsp; * &lt;li&gt;H2 ({@code org.h2.jdbcx.JdbcDataSource})&lt;/li&gt;
&nbsp; * &lt;li&gt;Postgres ({@code org.postgresql.ds.PGSimpleDataSource})&lt;/li&gt;
&nbsp; * &lt;li&gt;Any {@code DataSource} implementation with appropriately named methods&lt;/li&gt;
&nbsp; * &lt;/ul&gt;
&nbsp; * &lt;p&gt;
&nbsp; * This class is commonly used in an {@code @Bean} method and often combined with
&nbsp; * {@code @ConfigurationProperties}.
&nbsp; *
&nbsp; * @param &lt;T&gt; the {@link DataSource} type being built
&nbsp; * @author Dave Syer
&nbsp; * @author Madhura Bhave
&nbsp; * @author Fabio Grassi
&nbsp; * @author Phillip Webb
&nbsp; * @since 2.0.0
&nbsp; * @see #create()
&nbsp; * @see #create(ClassLoader)
&nbsp; * @see #derivedFrom(DataSource)
&nbsp; */
&nbsp;public final class DataSourceBuilder&lt;T extends DataSource&gt; {
&nbsp;
&nbsp;	private final ClassLoader classLoader;
&nbsp;
<b class="nc">&nbsp;	private final Map&lt;DataSourceProperty, String&gt; values = new HashMap&lt;&gt;();</b>
&nbsp;
&nbsp;	private Class&lt;T&gt; type;
&nbsp;
&nbsp;	private final DataSource deriveFrom;
&nbsp;
<b class="nc">&nbsp;	private DataSourceBuilder(ClassLoader classLoader) {</b>
<b class="nc">&nbsp;		this.classLoader = classLoader;</b>
<b class="nc">&nbsp;		this.deriveFrom = null;</b>
&nbsp;	}
&nbsp;
&nbsp;	@SuppressWarnings(&quot;unchecked&quot;)
<b class="nc">&nbsp;	private DataSourceBuilder(T deriveFrom) {</b>
<b class="nc">&nbsp;		Assert.notNull(deriveFrom, &quot;DataSource must not be null&quot;);</b>
<b class="nc">&nbsp;		this.classLoader = deriveFrom.getClass().getClassLoader();</b>
<b class="nc">&nbsp;		this.type = (Class&lt;T&gt;) deriveFrom.getClass();</b>
<b class="nc">&nbsp;		this.deriveFrom = deriveFrom;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Set the {@link DataSource} type that should be built.
&nbsp;	 * @param &lt;D&gt; the datasource type
&nbsp;	 * @param type the datasource type
&nbsp;	 * @return this builder
&nbsp;	 */
&nbsp;	@SuppressWarnings(&quot;unchecked&quot;)
&nbsp;	public &lt;D extends DataSource&gt; DataSourceBuilder&lt;D&gt; type(Class&lt;D&gt; type) {
<b class="nc">&nbsp;		this.type = (Class&lt;T&gt;) type;</b>
<b class="nc">&nbsp;		return (DataSourceBuilder&lt;D&gt;) this;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Set the URL that should be used when building the datasource.
&nbsp;	 * @param url the JDBC url
&nbsp;	 * @return this builder
&nbsp;	 */
&nbsp;	public DataSourceBuilder&lt;T&gt; url(String url) {
<b class="nc">&nbsp;		set(DataSourceProperty.URL, url);</b>
<b class="nc">&nbsp;		return this;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Set the driver class name that should be used when building the datasource.
&nbsp;	 * @param driverClassName the driver class name
&nbsp;	 * @return this builder
&nbsp;	 */
&nbsp;	public DataSourceBuilder&lt;T&gt; driverClassName(String driverClassName) {
<b class="nc">&nbsp;		set(DataSourceProperty.DRIVER_CLASS_NAME, driverClassName);</b>
<b class="nc">&nbsp;		return this;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Set the username that should be used when building the datasource.
&nbsp;	 * @param username the user name
&nbsp;	 * @return this builder
&nbsp;	 */
&nbsp;	public DataSourceBuilder&lt;T&gt; username(String username) {
<b class="nc">&nbsp;		set(DataSourceProperty.USERNAME, username);</b>
<b class="nc">&nbsp;		return this;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Set the password that should be used when building the datasource.
&nbsp;	 * @param password the password
&nbsp;	 * @return this builder
&nbsp;	 */
&nbsp;	public DataSourceBuilder&lt;T&gt; password(String password) {
<b class="nc">&nbsp;		set(DataSourceProperty.PASSWORD, password);</b>
<b class="nc">&nbsp;		return this;</b>
&nbsp;	}
&nbsp;
&nbsp;	private void set(DataSourceProperty property, String value) {
<b class="nc">&nbsp;		this.values.put(property, value);</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Return a newly built {@link DataSource} instance.
&nbsp;	 * @return the built datasource
&nbsp;	 */
&nbsp;	public T build() {
<b class="nc">&nbsp;		DataSourceProperties&lt;T&gt; properties = DataSourceProperties.forType(this.classLoader, this.type);</b>
<b class="nc">&nbsp;		DataSourceProperties&lt;DataSource&gt; deriveFromProperties = getDeriveFromProperties();</b>
<b class="nc">&nbsp;		Class&lt;? extends T&gt; instanceType = (this.type != null) ? this.type : properties.getDataSourceInstanceType();</b>
<b class="nc">&nbsp;		T dataSource = BeanUtils.instantiateClass(instanceType);</b>
<b class="nc">&nbsp;		Set&lt;DataSourceProperty&gt; applied = new HashSet&lt;&gt;();</b>
<b class="nc">&nbsp;		for (DataSourceProperty property : DataSourceProperty.values()) {</b>
<b class="nc">&nbsp;			String value = this.values.get(property);</b>
<b class="nc">&nbsp;			if (value == null &amp;&amp; deriveFromProperties != null &amp;&amp; properties.canSet(property)) {</b>
<b class="nc">&nbsp;				value = deriveFromProperties.get(this.deriveFrom, property);</b>
&nbsp;			}
<b class="nc">&nbsp;			if (value != null) {</b>
<b class="nc">&nbsp;				properties.set(dataSource, property, value);</b>
<b class="nc">&nbsp;				applied.add(property);</b>
&nbsp;			}
&nbsp;		}
<b class="nc">&nbsp;		if (!applied.contains(DataSourceProperty.DRIVER_CLASS_NAME)</b>
<b class="nc">&nbsp;				&amp;&amp; properties.canSet(DataSourceProperty.DRIVER_CLASS_NAME)</b>
<b class="nc">&nbsp;				&amp;&amp; this.values.containsKey(DataSourceProperty.URL)) {</b>
<b class="nc">&nbsp;			String url = this.values.get(DataSourceProperty.URL);</b>
<b class="nc">&nbsp;			DatabaseDriver driver = DatabaseDriver.fromJdbcUrl(url);</b>
<b class="nc">&nbsp;			properties.set(dataSource, DataSourceProperty.DRIVER_CLASS_NAME, driver.getDriverClassName());</b>
&nbsp;		}
<b class="nc">&nbsp;		return dataSource;</b>
&nbsp;	}
&nbsp;
&nbsp;	@SuppressWarnings(&quot;unchecked&quot;)
&nbsp;	private DataSourceProperties&lt;DataSource&gt; getDeriveFromProperties() {
<b class="nc">&nbsp;		if (this.deriveFrom == null) {</b>
<b class="nc">&nbsp;			return null;</b>
&nbsp;		}
<b class="nc">&nbsp;		return DataSourceProperties.forType(this.classLoader, (Class&lt;DataSource&gt;) this.deriveFrom.getClass());</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Create a new {@link DataSourceBuilder} instance.
&nbsp;	 * @return a new datasource builder instance
&nbsp;	 */
&nbsp;	public static DataSourceBuilder&lt;?&gt; create() {
<b class="nc">&nbsp;		return create(null);</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Create a new {@link DataSourceBuilder} instance.
&nbsp;	 * @param classLoader the classloader used to discover preferred settings
&nbsp;	 * @return a new {@link DataSource} builder instance
&nbsp;	 */
&nbsp;	public static DataSourceBuilder&lt;?&gt; create(ClassLoader classLoader) {
<b class="nc">&nbsp;		return new DataSourceBuilder&lt;&gt;(classLoader);</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Create a new {@link DataSourceBuilder} instance derived from the specified data
&nbsp;	 * source. The returned builder can be used to build the same type of
&nbsp;	 * {@link DataSource} with {@code username}, {@code password}, {@code url} and
&nbsp;	 * {@code driverClassName} properties copied from the original when not specifically
&nbsp;	 * set.
&nbsp;	 * @param dataSource the source {@link DataSource}
&nbsp;	 * @return a new {@link DataSource} builder
&nbsp;	 * @since 2.5.0
&nbsp;	 */
&nbsp;	public static DataSourceBuilder&lt;?&gt; derivedFrom(DataSource dataSource) {
<b class="nc">&nbsp;		if (dataSource instanceof EmbeddedDatabase) {</b>
&nbsp;			try {
<b class="nc">&nbsp;				dataSource = dataSource.unwrap(DataSource.class);</b>
&nbsp;			}
<b class="nc">&nbsp;			catch (SQLException ex) {</b>
<b class="nc">&nbsp;				throw new IllegalStateException(&quot;Unable to unwrap embedded database&quot;, ex);</b>
<b class="nc">&nbsp;			}</b>
&nbsp;		}
<b class="nc">&nbsp;		return new DataSourceBuilder&lt;&gt;(unwrap(dataSource));</b>
&nbsp;	}
&nbsp;
&nbsp;	private static DataSource unwrap(DataSource dataSource) {
&nbsp;		try {
<b class="nc">&nbsp;			while (dataSource.isWrapperFor(DataSource.class)) {</b>
<b class="nc">&nbsp;				DataSource unwrapped = dataSource.unwrap(DataSource.class);</b>
<b class="nc">&nbsp;				if (unwrapped == dataSource) {</b>
<b class="nc">&nbsp;					return unwrapped;</b>
&nbsp;				}
<b class="nc">&nbsp;				dataSource = unwrapped;</b>
<b class="nc">&nbsp;			}</b>
&nbsp;		}
<b class="nc">&nbsp;		catch (SQLException ex) {</b>
&nbsp;			// Try to continue with the existing, potentially still wrapped, DataSource
<b class="nc">&nbsp;		}</b>
<b class="nc">&nbsp;		return dataSource;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Find the {@link DataSource} type preferred for the given classloader.
&nbsp;	 * @param classLoader the classloader used to discover preferred settings
&nbsp;	 * @return the preferred {@link DataSource} type
&nbsp;	 */
&nbsp;	public static Class&lt;? extends DataSource&gt; findType(ClassLoader classLoader) {
<b class="nc">&nbsp;		MappedDataSourceProperties&lt;?&gt; mappings = MappedDataSourceProperties.forType(classLoader, null);</b>
<b class="nc">&nbsp;		return (mappings != null) ? mappings.getDataSourceInstanceType() : null;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * An individual DataSource property supported by the builder.
&nbsp;	 */
<b class="nc">&nbsp;	private enum DataSourceProperty {</b>
&nbsp;
<b class="nc">&nbsp;		URL(false, &quot;url&quot;, &quot;URL&quot;),</b>
&nbsp;
<b class="nc">&nbsp;		DRIVER_CLASS_NAME(true, &quot;driverClassName&quot;),</b>
&nbsp;
<b class="nc">&nbsp;		USERNAME(false, &quot;username&quot;, &quot;user&quot;),</b>
&nbsp;
<b class="nc">&nbsp;		PASSWORD(false, &quot;password&quot;);</b>
&nbsp;
&nbsp;		private final boolean optional;
&nbsp;
&nbsp;		private final String[] names;
&nbsp;
<b class="nc">&nbsp;		DataSourceProperty(boolean optional, String... names) {</b>
<b class="nc">&nbsp;			this.optional = optional;</b>
<b class="nc">&nbsp;			this.names = names;</b>
&nbsp;		}
&nbsp;
&nbsp;		boolean isOptional() {
<b class="nc">&nbsp;			return this.optional;</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public String toString() {
<b class="nc">&nbsp;			return this.names[0];</b>
&nbsp;		}
&nbsp;
&nbsp;		Method findSetter(Class&lt;?&gt; type) {
<b class="nc">&nbsp;			return findMethod(&quot;set&quot;, type, String.class);</b>
&nbsp;		}
&nbsp;
&nbsp;		Method findGetter(Class&lt;?&gt; type) {
<b class="nc">&nbsp;			return findMethod(&quot;get&quot;, type);</b>
&nbsp;		}
&nbsp;
&nbsp;		private Method findMethod(String prefix, Class&lt;?&gt; type, Class&lt;?&gt;... paramTypes) {
<b class="nc">&nbsp;			for (String name : this.names) {</b>
<b class="nc">&nbsp;				String candidate = prefix + StringUtils.capitalize(name);</b>
<b class="nc">&nbsp;				Method method = ReflectionUtils.findMethod(type, candidate, paramTypes);</b>
<b class="nc">&nbsp;				if (method != null) {</b>
<b class="nc">&nbsp;					return method;</b>
&nbsp;				}
&nbsp;			}
<b class="nc">&nbsp;			return null;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	private interface DataSourceProperties&lt;T extends DataSource&gt; {
&nbsp;
&nbsp;		Class&lt;? extends T&gt; getDataSourceInstanceType();
&nbsp;
&nbsp;		boolean canSet(DataSourceProperty property);
&nbsp;
&nbsp;		void set(T dataSource, DataSourceProperty property, String value);
&nbsp;
&nbsp;		String get(T dataSource, DataSourceProperty property);
&nbsp;
&nbsp;		static &lt;T extends DataSource&gt; DataSourceProperties&lt;T&gt; forType(ClassLoader classLoader, Class&lt;T&gt; type) {
<b class="nc">&nbsp;			MappedDataSourceProperties&lt;T&gt; mapped = MappedDataSourceProperties.forType(classLoader, type);</b>
<b class="nc">&nbsp;			return (mapped != null) ? mapped : new ReflectionDataSourceProperties&lt;&gt;(type);</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	private static class MappedDataSourceProperties&lt;T extends DataSource&gt; implements DataSourceProperties&lt;T&gt; {
&nbsp;
<b class="nc">&nbsp;		private final Map&lt;DataSourceProperty, MappedDataSourceProperty&lt;T, ?&gt;&gt; mappedProperties = new HashMap&lt;&gt;();</b>
&nbsp;
&nbsp;		private final Class&lt;T&gt; dataSourceType;
&nbsp;
&nbsp;		@SuppressWarnings(&quot;unchecked&quot;)
<b class="nc">&nbsp;		MappedDataSourceProperties() {</b>
<b class="nc">&nbsp;			this.dataSourceType = (Class&lt;T&gt;) ResolvableType.forClass(MappedDataSourceProperties.class, getClass())</b>
<b class="nc">&nbsp;				.resolveGeneric();</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public Class&lt;? extends T&gt; getDataSourceInstanceType() {
<b class="nc">&nbsp;			return this.dataSourceType;</b>
&nbsp;		}
&nbsp;
&nbsp;		protected void add(DataSourceProperty property, Getter&lt;T, String&gt; getter, Setter&lt;T, String&gt; setter) {
<b class="nc">&nbsp;			add(property, String.class, getter, setter);</b>
&nbsp;		}
&nbsp;
&nbsp;		protected &lt;V&gt; void add(DataSourceProperty property, Class&lt;V&gt; type, Getter&lt;T, V&gt; getter, Setter&lt;T, V&gt; setter) {
<b class="nc">&nbsp;			this.mappedProperties.put(property, new MappedDataSourceProperty&lt;&gt;(property, type, getter, setter));</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public boolean canSet(DataSourceProperty property) {
<b class="nc">&nbsp;			return this.mappedProperties.containsKey(property);</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public void set(T dataSource, DataSourceProperty property, String value) {
<b class="nc">&nbsp;			MappedDataSourceProperty&lt;T, ?&gt; mappedProperty = getMapping(property);</b>
<b class="nc">&nbsp;			if (mappedProperty != null) {</b>
<b class="nc">&nbsp;				mappedProperty.set(dataSource, value);</b>
&nbsp;			}
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public String get(T dataSource, DataSourceProperty property) {
<b class="nc">&nbsp;			MappedDataSourceProperty&lt;T, ?&gt; mappedProperty = getMapping(property);</b>
<b class="nc">&nbsp;			if (mappedProperty != null) {</b>
<b class="nc">&nbsp;				return mappedProperty.get(dataSource);</b>
&nbsp;			}
<b class="nc">&nbsp;			return null;</b>
&nbsp;		}
&nbsp;
&nbsp;		private MappedDataSourceProperty&lt;T, ?&gt; getMapping(DataSourceProperty property) {
<b class="nc">&nbsp;			MappedDataSourceProperty&lt;T, ?&gt; mappedProperty = this.mappedProperties.get(property);</b>
<b class="nc">&nbsp;			UnsupportedDataSourcePropertyException.throwIf(!property.isOptional() &amp;&amp; mappedProperty == null,</b>
<b class="nc">&nbsp;					() -&gt; &quot;No mapping found for &quot; + property);</b>
<b class="nc">&nbsp;			return mappedProperty;</b>
&nbsp;		}
&nbsp;
&nbsp;		static &lt;T extends DataSource&gt; MappedDataSourceProperties&lt;T&gt; forType(ClassLoader classLoader, Class&lt;T&gt; type) {
<b class="nc">&nbsp;			MappedDataSourceProperties&lt;T&gt; pooled = lookupPooled(classLoader, type);</b>
<b class="nc">&nbsp;			if (type == null || pooled != null) {</b>
<b class="nc">&nbsp;				return pooled;</b>
&nbsp;			}
<b class="nc">&nbsp;			return lookupBasic(classLoader, type);</b>
&nbsp;		}
&nbsp;
&nbsp;		private static &lt;T extends DataSource&gt; MappedDataSourceProperties&lt;T&gt; lookupPooled(ClassLoader classLoader,
&nbsp;				Class&lt;T&gt; type) {
<b class="nc">&nbsp;			MappedDataSourceProperties&lt;T&gt; result = null;</b>
<b class="nc">&nbsp;			result = lookup(classLoader, type, result, &quot;com.zaxxer.hikari.HikariDataSource&quot;,</b>
&nbsp;					HikariDataSourceProperties::new);
<b class="nc">&nbsp;			result = lookup(classLoader, type, result, &quot;org.apache.tomcat.jdbc.pool.DataSource&quot;,</b>
&nbsp;					TomcatPoolDataSourceProperties::new);
<b class="nc">&nbsp;			result = lookup(classLoader, type, result, &quot;org.apache.commons.dbcp2.BasicDataSource&quot;,</b>
&nbsp;					MappedDbcp2DataSource::new);
<b class="nc">&nbsp;			result = lookup(classLoader, type, result, &quot;oracle.ucp.jdbc.PoolDataSourceImpl&quot;,</b>
&nbsp;					OraclePoolDataSourceProperties::new, &quot;oracle.jdbc.OracleConnection&quot;);
<b class="nc">&nbsp;			result = lookup(classLoader, type, result, &quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;,</b>
&nbsp;					ComboPooledDataSourceProperties::new);
<b class="nc">&nbsp;			return result;</b>
&nbsp;		}
&nbsp;
&nbsp;		private static &lt;T extends DataSource&gt; MappedDataSourceProperties&lt;T&gt; lookupBasic(ClassLoader classLoader,
&nbsp;				Class&lt;T&gt; dataSourceType) {
<b class="nc">&nbsp;			MappedDataSourceProperties&lt;T&gt; result = null;</b>
<b class="nc">&nbsp;			result = lookup(classLoader, dataSourceType, result,</b>
&nbsp;					&quot;org.springframework.jdbc.datasource.SimpleDriverDataSource&quot;, SimpleDataSourceProperties::new);
<b class="nc">&nbsp;			result = lookup(classLoader, dataSourceType, result, &quot;oracle.jdbc.datasource.OracleDataSource&quot;,</b>
&nbsp;					OracleDataSourceProperties::new);
<b class="nc">&nbsp;			result = lookup(classLoader, dataSourceType, result, &quot;org.h2.jdbcx.JdbcDataSource&quot;,</b>
&nbsp;					H2DataSourceProperties::new);
<b class="nc">&nbsp;			result = lookup(classLoader, dataSourceType, result, &quot;org.postgresql.ds.PGSimpleDataSource&quot;,</b>
&nbsp;					PostgresDataSourceProperties::new);
<b class="nc">&nbsp;			return result;</b>
&nbsp;		}
&nbsp;
&nbsp;		@SuppressWarnings(&quot;unchecked&quot;)
&nbsp;		private static &lt;T extends DataSource&gt; MappedDataSourceProperties&lt;T&gt; lookup(ClassLoader classLoader,
&nbsp;				Class&lt;T&gt; dataSourceType, MappedDataSourceProperties&lt;T&gt; existing, String dataSourceClassName,
&nbsp;				Supplier&lt;MappedDataSourceProperties&lt;?&gt;&gt; propertyMappingsSupplier, String... requiredClassNames) {
<b class="nc">&nbsp;			if (existing != null || !allPresent(classLoader, dataSourceClassName, requiredClassNames)) {</b>
<b class="nc">&nbsp;				return existing;</b>
&nbsp;			}
<b class="nc">&nbsp;			MappedDataSourceProperties&lt;?&gt; propertyMappings = propertyMappingsSupplier.get();</b>
<b class="nc">&nbsp;			return (dataSourceType == null</b>
<b class="nc">&nbsp;					|| propertyMappings.getDataSourceInstanceType().isAssignableFrom(dataSourceType))</b>
<b class="nc">&nbsp;							? (MappedDataSourceProperties&lt;T&gt;) propertyMappings : null;</b>
&nbsp;		}
&nbsp;
&nbsp;		private static boolean allPresent(ClassLoader classLoader, String dataSourceClassName,
&nbsp;				String[] requiredClassNames) {
<b class="nc">&nbsp;			boolean result = ClassUtils.isPresent(dataSourceClassName, classLoader);</b>
<b class="nc">&nbsp;			for (String requiredClassName : requiredClassNames) {</b>
<b class="nc">&nbsp;				result = result &amp;&amp; ClassUtils.isPresent(requiredClassName, classLoader);</b>
&nbsp;			}
<b class="nc">&nbsp;			return result;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	private static class MappedDataSourceProperty&lt;T extends DataSource, V&gt; {
&nbsp;
&nbsp;		private final DataSourceProperty property;
&nbsp;
&nbsp;		private final Class&lt;V&gt; type;
&nbsp;
&nbsp;		private final Getter&lt;T, V&gt; getter;
&nbsp;
&nbsp;		private final Setter&lt;T, V&gt; setter;
&nbsp;
<b class="nc">&nbsp;		MappedDataSourceProperty(DataSourceProperty property, Class&lt;V&gt; type, Getter&lt;T, V&gt; getter, Setter&lt;T, V&gt; setter) {</b>
<b class="nc">&nbsp;			this.property = property;</b>
<b class="nc">&nbsp;			this.type = type;</b>
<b class="nc">&nbsp;			this.getter = getter;</b>
<b class="nc">&nbsp;			this.setter = setter;</b>
&nbsp;		}
&nbsp;
&nbsp;		void set(T dataSource, String value) {
&nbsp;			try {
<b class="nc">&nbsp;				if (this.setter == null) {</b>
<b class="nc">&nbsp;					UnsupportedDataSourcePropertyException.throwIf(!this.property.isOptional(),</b>
<b class="nc">&nbsp;							() -&gt; &quot;No setter mapped for &#39;&quot; + this.property + &quot;&#39; property&quot;);</b>
&nbsp;					return;
&nbsp;				}
<b class="nc">&nbsp;				this.setter.set(dataSource, convertFromString(value));</b>
&nbsp;			}
<b class="nc">&nbsp;			catch (SQLException ex) {</b>
<b class="nc">&nbsp;				throw new IllegalStateException(ex);</b>
<b class="nc">&nbsp;			}</b>
&nbsp;		}
&nbsp;
&nbsp;		String get(T dataSource) {
&nbsp;			try {
<b class="nc">&nbsp;				if (this.getter == null) {</b>
<b class="nc">&nbsp;					UnsupportedDataSourcePropertyException.throwIf(!this.property.isOptional(),</b>
<b class="nc">&nbsp;							() -&gt; &quot;No getter mapped for &#39;&quot; + this.property + &quot;&#39; property&quot;);</b>
<b class="nc">&nbsp;					return null;</b>
&nbsp;				}
<b class="nc">&nbsp;				return convertToString(this.getter.get(dataSource));</b>
&nbsp;			}
<b class="nc">&nbsp;			catch (SQLException ex) {</b>
<b class="nc">&nbsp;				throw new IllegalStateException(ex);</b>
&nbsp;			}
&nbsp;		}
&nbsp;
&nbsp;		@SuppressWarnings(&quot;unchecked&quot;)
&nbsp;		private V convertFromString(String value) {
<b class="nc">&nbsp;			if (String.class.equals(this.type)) {</b>
<b class="nc">&nbsp;				return (V) value;</b>
&nbsp;			}
<b class="nc">&nbsp;			if (Class.class.equals(this.type)) {</b>
<b class="nc">&nbsp;				return (V) ClassUtils.resolveClassName(value, null);</b>
&nbsp;			}
<b class="nc">&nbsp;			throw new IllegalStateException(&quot;Unsupported value type &quot; + this.type);</b>
&nbsp;		}
&nbsp;
&nbsp;		private String convertToString(V value) {
<b class="nc">&nbsp;			if (String.class.equals(this.type)) {</b>
<b class="nc">&nbsp;				return (String) value;</b>
&nbsp;			}
<b class="nc">&nbsp;			if (Class.class.equals(this.type)) {</b>
<b class="nc">&nbsp;				return ((Class&lt;?&gt;) value).getName();</b>
&nbsp;			}
<b class="nc">&nbsp;			throw new IllegalStateException(&quot;Unsupported value type &quot; + this.type);</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	private static class ReflectionDataSourceProperties&lt;T extends DataSource&gt; implements DataSourceProperties&lt;T&gt; {
&nbsp;
&nbsp;		private final Map&lt;DataSourceProperty, Method&gt; getters;
&nbsp;
&nbsp;		private final Map&lt;DataSourceProperty, Method&gt; setters;
&nbsp;
&nbsp;		private final Class&lt;T&gt; dataSourceType;
&nbsp;
<b class="nc">&nbsp;		ReflectionDataSourceProperties(Class&lt;T&gt; dataSourceType) {</b>
<b class="nc">&nbsp;			Assert.state(dataSourceType != null, &quot;No supported DataSource type found&quot;);</b>
<b class="nc">&nbsp;			Map&lt;DataSourceProperty, Method&gt; getters = new HashMap&lt;&gt;();</b>
<b class="nc">&nbsp;			Map&lt;DataSourceProperty, Method&gt; setters = new HashMap&lt;&gt;();</b>
<b class="nc">&nbsp;			for (DataSourceProperty property : DataSourceProperty.values()) {</b>
<b class="nc">&nbsp;				putIfNotNull(getters, property, property.findGetter(dataSourceType));</b>
<b class="nc">&nbsp;				putIfNotNull(setters, property, property.findSetter(dataSourceType));</b>
&nbsp;			}
<b class="nc">&nbsp;			this.dataSourceType = dataSourceType;</b>
<b class="nc">&nbsp;			this.getters = Collections.unmodifiableMap(getters);</b>
<b class="nc">&nbsp;			this.setters = Collections.unmodifiableMap(setters);</b>
&nbsp;		}
&nbsp;
&nbsp;		private void putIfNotNull(Map&lt;DataSourceProperty, Method&gt; map, DataSourceProperty property, Method method) {
<b class="nc">&nbsp;			if (method != null) {</b>
<b class="nc">&nbsp;				map.put(property, method);</b>
&nbsp;			}
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public Class&lt;T&gt; getDataSourceInstanceType() {
<b class="nc">&nbsp;			return this.dataSourceType;</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public boolean canSet(DataSourceProperty property) {
<b class="nc">&nbsp;			return this.setters.containsKey(property);</b>
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public void set(T dataSource, DataSourceProperty property, String value) {
<b class="nc">&nbsp;			Method method = getMethod(property, this.setters);</b>
<b class="nc">&nbsp;			if (method != null) {</b>
<b class="nc">&nbsp;				ReflectionUtils.invokeMethod(method, dataSource, value);</b>
&nbsp;			}
&nbsp;		}
&nbsp;
&nbsp;		@Override
&nbsp;		public String get(T dataSource, DataSourceProperty property) {
<b class="nc">&nbsp;			Method method = getMethod(property, this.getters);</b>
<b class="nc">&nbsp;			if (method != null) {</b>
<b class="nc">&nbsp;				return (String) ReflectionUtils.invokeMethod(method, dataSource);</b>
&nbsp;			}
<b class="nc">&nbsp;			return null;</b>
&nbsp;		}
&nbsp;
&nbsp;		private Method getMethod(DataSourceProperty property, Map&lt;DataSourceProperty, Method&gt; methods) {
<b class="nc">&nbsp;			Method method = methods.get(property);</b>
<b class="nc">&nbsp;			if (method == null) {</b>
<b class="nc">&nbsp;				UnsupportedDataSourcePropertyException.throwIf(!property.isOptional(),</b>
<b class="nc">&nbsp;						() -&gt; &quot;Unable to find suitable method for &quot; + property);</b>
<b class="nc">&nbsp;				return null;</b>
&nbsp;			}
<b class="nc">&nbsp;			ReflectionUtils.makeAccessible(method);</b>
<b class="nc">&nbsp;			return method;</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	@FunctionalInterface
&nbsp;	private interface Getter&lt;T, V&gt; {
&nbsp;
&nbsp;		V get(T instance) throws SQLException;
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	@FunctionalInterface
&nbsp;	private interface Setter&lt;T, V&gt; {
&nbsp;
&nbsp;		void set(T instance, V value) throws SQLException;
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * {@link DataSourceProperties} for Hikari.
&nbsp;	 */
&nbsp;	private static class HikariDataSourceProperties extends MappedDataSourceProperties&lt;HikariDataSource&gt; {
&nbsp;
<b class="nc">&nbsp;		HikariDataSourceProperties() {</b>
<b class="nc">&nbsp;			add(DataSourceProperty.URL, HikariDataSource::getJdbcUrl, HikariDataSource::setJdbcUrl);</b>
<b class="nc">&nbsp;			add(DataSourceProperty.DRIVER_CLASS_NAME, HikariDataSource::getDriverClassName,</b>
&nbsp;					HikariDataSource::setDriverClassName);
<b class="nc">&nbsp;			add(DataSourceProperty.USERNAME, HikariDataSource::getUsername, HikariDataSource::setUsername);</b>
<b class="nc">&nbsp;			add(DataSourceProperty.PASSWORD, HikariDataSource::getPassword, HikariDataSource::setPassword);</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * {@link DataSourceProperties} for Tomcat Pool.
&nbsp;	 */
&nbsp;	private static class TomcatPoolDataSourceProperties
&nbsp;			extends MappedDataSourceProperties&lt;org.apache.tomcat.jdbc.pool.DataSource&gt; {
&nbsp;
<b class="nc">&nbsp;		TomcatPoolDataSourceProperties() {</b>
<b class="nc">&nbsp;			add(DataSourceProperty.URL, org.apache.tomcat.jdbc.pool.DataSource::getUrl,</b>
&nbsp;					org.apache.tomcat.jdbc.pool.DataSource::setUrl);
<b class="nc">&nbsp;			add(DataSourceProperty.DRIVER_CLASS_NAME, org.apache.tomcat.jdbc.pool.DataSource::getDriverClassName,</b>
&nbsp;					org.apache.tomcat.jdbc.pool.DataSource::setDriverClassName);
<b class="nc">&nbsp;			add(DataSourceProperty.USERNAME, org.apache.tomcat.jdbc.pool.DataSource::getUsername,</b>
&nbsp;					org.apache.tomcat.jdbc.pool.DataSource::setUsername);
<b class="nc">&nbsp;			add(DataSourceProperty.PASSWORD, org.apache.tomcat.jdbc.pool.DataSource::getPassword,</b>
&nbsp;					org.apache.tomcat.jdbc.pool.DataSource::setPassword);
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * {@link DataSourceProperties} for DBCP2.
&nbsp;	 */
&nbsp;	private static class MappedDbcp2DataSource extends MappedDataSourceProperties&lt;BasicDataSource&gt; {
&nbsp;
<b class="nc">&nbsp;		MappedDbcp2DataSource() {</b>
<b class="nc">&nbsp;			add(DataSourceProperty.URL, BasicDataSource::getUrl, BasicDataSource::setUrl);</b>
<b class="nc">&nbsp;			add(DataSourceProperty.DRIVER_CLASS_NAME, BasicDataSource::getDriverClassName,</b>
&nbsp;					BasicDataSource::setDriverClassName);
<b class="nc">&nbsp;			add(DataSourceProperty.USERNAME, BasicDataSource::getUserName, BasicDataSource::setUsername);</b>
<b class="nc">&nbsp;			add(DataSourceProperty.PASSWORD, null, BasicDataSource::setPassword);</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * {@link DataSourceProperties} for Oracle Pool.
&nbsp;	 */
&nbsp;	private static class OraclePoolDataSourceProperties extends MappedDataSourceProperties&lt;PoolDataSource&gt; {
&nbsp;
&nbsp;		@Override
&nbsp;		public Class&lt;? extends PoolDataSource&gt; getDataSourceInstanceType() {
<b class="nc">&nbsp;			return PoolDataSourceImpl.class;</b>
&nbsp;		}
&nbsp;
<b class="nc">&nbsp;		OraclePoolDataSourceProperties() {</b>
<b class="nc">&nbsp;			add(DataSourceProperty.URL, PoolDataSource::getURL, PoolDataSource::setURL);</b>
<b class="nc">&nbsp;			add(DataSourceProperty.DRIVER_CLASS_NAME, PoolDataSource::getConnectionFactoryClassName,</b>
&nbsp;					PoolDataSource::setConnectionFactoryClassName);
<b class="nc">&nbsp;			add(DataSourceProperty.USERNAME, PoolDataSource::getUser, PoolDataSource::setUser);</b>
<b class="nc">&nbsp;			add(DataSourceProperty.PASSWORD, null, PoolDataSource::setPassword);</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * {@link DataSourceProperties} for C3P0.
&nbsp;	 */
&nbsp;	private static class ComboPooledDataSourceProperties extends MappedDataSourceProperties&lt;ComboPooledDataSource&gt; {
&nbsp;
<b class="nc">&nbsp;		ComboPooledDataSourceProperties() {</b>
<b class="nc">&nbsp;			add(DataSourceProperty.URL, ComboPooledDataSource::getJdbcUrl, ComboPooledDataSource::setJdbcUrl);</b>
<b class="nc">&nbsp;			add(DataSourceProperty.DRIVER_CLASS_NAME, ComboPooledDataSource::getDriverClass, this::setDriverClass);</b>
<b class="nc">&nbsp;			add(DataSourceProperty.USERNAME, ComboPooledDataSource::getUser, ComboPooledDataSource::setUser);</b>
<b class="nc">&nbsp;			add(DataSourceProperty.PASSWORD, ComboPooledDataSource::getPassword, ComboPooledDataSource::setPassword);</b>
&nbsp;		}
&nbsp;
&nbsp;		private void setDriverClass(ComboPooledDataSource dataSource, String driverClass) {
&nbsp;			try {
<b class="nc">&nbsp;				dataSource.setDriverClass(driverClass);</b>
&nbsp;			}
<b class="nc">&nbsp;			catch (PropertyVetoException ex) {</b>
<b class="nc">&nbsp;				throw new IllegalArgumentException(ex);</b>
<b class="nc">&nbsp;			}</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * {@link DataSourceProperties} for Spring&#39;s {@link SimpleDriverDataSource}.
&nbsp;	 */
&nbsp;	private static class SimpleDataSourceProperties extends MappedDataSourceProperties&lt;SimpleDriverDataSource&gt; {
&nbsp;
&nbsp;		@SuppressWarnings(&quot;unchecked&quot;)
<b class="nc">&nbsp;		SimpleDataSourceProperties() {</b>
<b class="nc">&nbsp;			add(DataSourceProperty.URL, SimpleDriverDataSource::getUrl, SimpleDriverDataSource::setUrl);</b>
<b class="nc">&nbsp;			add(DataSourceProperty.DRIVER_CLASS_NAME, Class.class, (dataSource) -&gt; dataSource.getDriver().getClass(),</b>
&nbsp;					SimpleDriverDataSource::setDriverClass);
<b class="nc">&nbsp;			add(DataSourceProperty.USERNAME, SimpleDriverDataSource::getUsername, SimpleDriverDataSource::setUsername);</b>
<b class="nc">&nbsp;			add(DataSourceProperty.PASSWORD, SimpleDriverDataSource::getPassword, SimpleDriverDataSource::setPassword);</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * {@link DataSourceProperties} for Oracle.
&nbsp;	 */
&nbsp;	private static class OracleDataSourceProperties extends MappedDataSourceProperties&lt;OracleDataSource&gt; {
&nbsp;
<b class="nc">&nbsp;		OracleDataSourceProperties() {</b>
<b class="nc">&nbsp;			add(DataSourceProperty.URL, OracleDataSource::getURL, OracleDataSource::setURL);</b>
<b class="nc">&nbsp;			add(DataSourceProperty.USERNAME, OracleDataSource::getUser, OracleDataSource::setUser);</b>
<b class="nc">&nbsp;			add(DataSourceProperty.PASSWORD, null, OracleDataSource::setPassword);</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * {@link DataSourceProperties} for H2.
&nbsp;	 */
&nbsp;	private static class H2DataSourceProperties extends MappedDataSourceProperties&lt;JdbcDataSource&gt; {
&nbsp;
<b class="nc">&nbsp;		H2DataSourceProperties() {</b>
<b class="nc">&nbsp;			add(DataSourceProperty.URL, JdbcDataSource::getUrl, JdbcDataSource::setUrl);</b>
<b class="nc">&nbsp;			add(DataSourceProperty.USERNAME, JdbcDataSource::getUser, JdbcDataSource::setUser);</b>
<b class="nc">&nbsp;			add(DataSourceProperty.PASSWORD, JdbcDataSource::getPassword, JdbcDataSource::setPassword);</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * {@link DataSourceProperties} for Postgres.
&nbsp;	 */
&nbsp;	private static class PostgresDataSourceProperties extends MappedDataSourceProperties&lt;PGSimpleDataSource&gt; {
&nbsp;
<b class="nc">&nbsp;		PostgresDataSourceProperties() {</b>
<b class="nc">&nbsp;			add(DataSourceProperty.URL, PGSimpleDataSource::getUrl, PGSimpleDataSource::setUrl);</b>
<b class="nc">&nbsp;			add(DataSourceProperty.USERNAME, PGSimpleDataSource::getUser, PGSimpleDataSource::setUser);</b>
<b class="nc">&nbsp;			add(DataSourceProperty.PASSWORD, PGSimpleDataSource::getPassword, PGSimpleDataSource::setPassword);</b>
&nbsp;		}
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-03-28 21:28</div>
</div>
</body>
</html>
